{"version":3,"sources":["../domain/perceptual/value-objects/PerceptualColor.ts","../domain/perceptual/services/AccessibilityService.ts","../domain/governance/value-objects/EnterprisePolicy.ts","../domain/governance/services/GovernanceEvaluator.ts","../domain/governance/index.ts"],"names":[],"mappings":"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","file":"chunk-QN62TTT3.mjs","sourcesContent":["/**\n * @fileoverview PerceptualColor Value Object\n *\n * Value Object inmutable que representa un color en múltiples espacios\n * perceptuales. Es el objeto fundamental del UI Kit, actuando como\n * puente entre Color Intelligence y el sistema de tokens.\n *\n * Principios:\n * - Inmutabilidad total\n * - Conversiones lazy con memoization\n * - No conoce React, DOM ni CSS\n * - Delega cálculos a Color Intelligence\n *\n * @module momoto-ui/domain/perceptual/value-objects/PerceptualColor\n * @version 1.0.0\n */\n\nimport type {\n  OklchCoordinates,\n  HctCoordinates,\n  RgbCoordinates,\n  HslCoordinates,\n  ColorTemperature,\n  ContrastMode,\n  Result,\n} from '../../types';\n\nimport {\n  type HexColor,\n  type OklchLightness,\n  type OklchChroma,\n  type OklchHue,\n  type ConfidenceLevel,\n  BrandConstructors,\n  TypeGuards,\n} from '../../types/branded';\n\n// ============================================================================\n// INTERFACES\n// ============================================================================\n\n/**\n * Opciones para crear un PerceptualColor.\n */\nexport interface PerceptualColorOptions {\n  readonly alpha?: number;\n  readonly gamutMapped?: boolean;\n}\n\n/**\n * Resultado de análisis perceptual.\n */\nexport interface PerceptualAnalysis {\n  readonly warmth: ColorTemperature;\n  readonly brightness: 'dark' | 'medium' | 'light';\n  readonly saturation: 'desaturated' | 'muted' | 'saturated' | 'vivid';\n  readonly contrastMode: ContrastMode;\n  readonly contrastConfidence: ConfidenceLevel;\n}\n\n/**\n * Opciones de interpolación.\n */\nexport interface InterpolationOptions {\n  readonly steps?: number;\n  readonly hueDirection?: 'shorter' | 'longer' | 'increasing' | 'decreasing';\n  readonly chromaPreservation?: boolean;\n}\n\n// ============================================================================\n// PERCEPTUAL COLOR VALUE OBJECT\n// ============================================================================\n\n/**\n * PerceptualColor - Value Object inmutable para colores perceptuales.\n *\n * Este es el objeto de color fundamental del UI Kit. Almacena el color\n * en formato OKLCH (perceptualmente uniforme) y proporciona conversiones\n * lazy a otros espacios.\n *\n * @example\n * ```typescript\n * // Crear desde hex\n * const color = PerceptualColor.fromHex('#0EB58C');\n *\n * // Operaciones inmutables (retornan nuevos objetos)\n * const lighter = color.lighten(0.1);\n * const moreVivid = color.saturate(0.2);\n *\n * // Acceso a coordenadas\n * console.log(color.oklch.l); // 0.72 (luminancia)\n *\n * // Análisis perceptual\n * const analysis = color.analyze();\n * console.log(analysis.contrastMode); // 'light-content'\n * ```\n */\nexport class PerceptualColor {\n  // ─────────────────────────────────────────────────────────────────────────\n  // PRIVATE STATE\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private readonly _oklch: OklchCoordinates;\n  private readonly _alpha: number;\n  private readonly _gamutMapped: boolean;\n\n  // Lazy-evaluated caches\n  private _hexCache?: HexColor;\n  private _rgbCache?: RgbCoordinates;\n  private _hslCache?: HslCoordinates;\n  private _hctCache?: HctCoordinates;\n  private _analysisCache?: PerceptualAnalysis;\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // CONSTRUCTOR (Private - use static factories)\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private constructor(\n    oklch: OklchCoordinates,\n    options: PerceptualColorOptions = {}\n  ) {\n    this._oklch = Object.freeze({\n      l: Math.max(0, Math.min(1, oklch.l)),\n      c: Math.max(0, oklch.c),\n      h: ((oklch.h % 360) + 360) % 360,\n    });\n    this._alpha = options.alpha ?? 1;\n    this._gamutMapped = options.gamutMapped ?? false;\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // STATIC FACTORIES\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Crea un PerceptualColor desde un valor hexadecimal.\n   */\n  static fromHex(hex: string): PerceptualColor {\n    const rgb = hexToRgb(hex);\n    const oklch = rgbToOklch(rgb);\n    return new PerceptualColor(oklch);\n  }\n\n  /**\n   * Crea un PerceptualColor desde coordenadas OKLCH.\n   */\n  static fromOklch(\n    l: number,\n    c: number,\n    h: number,\n    alpha = 1\n  ): PerceptualColor {\n    return new PerceptualColor({ l, c, h }, { alpha });\n  }\n\n  /**\n   * Crea un PerceptualColor desde coordenadas RGB.\n   */\n  static fromRgb(r: number, g: number, b: number, alpha = 1): PerceptualColor {\n    const oklch = rgbToOklch({ r, g, b });\n    return new PerceptualColor(oklch, { alpha });\n  }\n\n  /**\n   * Crea un PerceptualColor desde coordenadas HCT.\n   */\n  static fromHct(h: number, c: number, t: number): PerceptualColor {\n    // HCT tone to OKLCH lightness approximation\n    // Nota: En producción, esto usaría Color Intelligence para conversión precisa\n    const l = t / 100;\n    const oklchC = c / 100 * 0.4; // Normalize to OKLCH chroma range\n    return new PerceptualColor({ l, c: oklchC, h });\n  }\n\n  /**\n   * Intenta crear un PerceptualColor, retornando Result.\n   */\n  static tryFromHex(hex: string): Result<PerceptualColor, Error> {\n    try {\n      if (!TypeGuards.isHexColor(hex)) {\n        return { success: false, error: new Error(`Invalid hex color: ${hex}`) };\n      }\n      return { success: true, value: PerceptualColor.fromHex(hex) };\n    } catch (e) {\n      return { success: false, error: e as Error };\n    }\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // GETTERS (Coordenadas)\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Coordenadas OKLCH (fuente de verdad).\n   */\n  get oklch(): Readonly<OklchCoordinates> {\n    return this._oklch;\n  }\n\n  /**\n   * Luminancia OKLCH (0-1).\n   */\n  get lightness(): OklchLightness {\n    return BrandConstructors.oklchLightness(this._oklch.l);\n  }\n\n  /**\n   * Chroma OKLCH.\n   */\n  get chroma(): OklchChroma {\n    return BrandConstructors.oklchChroma(this._oklch.c);\n  }\n\n  /**\n   * Hue OKLCH (0-360).\n   */\n  get hue(): OklchHue {\n    return BrandConstructors.oklchHue(this._oklch.h);\n  }\n\n  /**\n   * Alpha (transparencia).\n   */\n  get alpha(): number {\n    return this._alpha;\n  }\n\n  /**\n   * Indica si el color fue mapeado al gamut sRGB.\n   */\n  get isGamutMapped(): boolean {\n    return this._gamutMapped;\n  }\n\n  /**\n   * Coordenadas RGB (lazy-evaluated).\n   */\n  get rgb(): Readonly<RgbCoordinates> {\n    if (!this._rgbCache) {\n      this._rgbCache = oklchToRgb(this._oklch);\n    }\n    return this._rgbCache;\n  }\n\n  /**\n   * Coordenadas HSL (lazy-evaluated).\n   */\n  get hsl(): Readonly<HslCoordinates> {\n    if (!this._hslCache) {\n      this._hslCache = rgbToHsl(this.rgb);\n    }\n    return this._hslCache;\n  }\n\n  /**\n   * Coordenadas HCT aproximadas (lazy-evaluated).\n   */\n  get hct(): Readonly<HctCoordinates> {\n    if (!this._hctCache) {\n      // Aproximación HCT desde OKLCH\n      // Nota: En producción usaría Color Intelligence para precisión\n      this._hctCache = {\n        h: this._oklch.h,\n        c: this._oklch.c * 250, // Scale to HCT range\n        t: this._oklch.l * 100,\n      };\n    }\n    return this._hctCache;\n  }\n\n  /**\n   * Valor hexadecimal (lazy-evaluated).\n   */\n  get hex(): HexColor {\n    if (!this._hexCache) {\n      this._hexCache = rgbToHex(this.rgb);\n    }\n    return this._hexCache;\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // OPERACIONES INMUTABLES\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Aclara el color.\n   * @param amount - Cantidad (0-1) para aclarar\n   */\n  lighten(amount: number): PerceptualColor {\n    const newL = Math.min(1, this._oklch.l + amount);\n    return new PerceptualColor({\n      l: newL,\n      c: this._oklch.c,\n      h: this._oklch.h,\n    }, { alpha: this._alpha });\n  }\n\n  /**\n   * Oscurece el color.\n   * @param amount - Cantidad (0-1) para oscurecer\n   */\n  darken(amount: number): PerceptualColor {\n    const newL = Math.max(0, this._oklch.l - amount);\n    return new PerceptualColor({\n      l: newL,\n      c: this._oklch.c,\n      h: this._oklch.h,\n    }, { alpha: this._alpha });\n  }\n\n  /**\n   * Aumenta la saturación.\n   * @param amount - Cantidad para aumentar chroma\n   */\n  saturate(amount: number): PerceptualColor {\n    const newC = this._oklch.c + amount;\n    return new PerceptualColor({\n      l: this._oklch.l,\n      c: newC,\n      h: this._oklch.h,\n    }, { alpha: this._alpha });\n  }\n\n  /**\n   * Reduce la saturación.\n   * @param amount - Cantidad para reducir chroma\n   */\n  desaturate(amount: number): PerceptualColor {\n    const newC = Math.max(0, this._oklch.c - amount);\n    return new PerceptualColor({\n      l: this._oklch.l,\n      c: newC,\n      h: this._oklch.h,\n    }, { alpha: this._alpha });\n  }\n\n  /**\n   * Rota el hue.\n   * @param degrees - Grados para rotar\n   */\n  rotateHue(degrees: number): PerceptualColor {\n    const newH = ((this._oklch.h + degrees) % 360 + 360) % 360;\n    return new PerceptualColor({\n      l: this._oklch.l,\n      c: this._oklch.c,\n      h: newH,\n    }, { alpha: this._alpha });\n  }\n\n  /**\n   * Ajusta la transparencia.\n   * @param alpha - Nuevo valor alpha (0-1)\n   */\n  withAlpha(alpha: number): PerceptualColor {\n    return new PerceptualColor(this._oklch, {\n      alpha: Math.max(0, Math.min(1, alpha)),\n      gamutMapped: this._gamutMapped,\n    });\n  }\n\n  /**\n   * Interpola hacia otro color.\n   * @param target - Color destino\n   * @param t - Factor de interpolación (0-1)\n   * @param options - Opciones de interpolación\n   */\n  interpolate(\n    target: PerceptualColor,\n    t: number,\n    options: InterpolationOptions = {}\n  ): PerceptualColor {\n    const { hueDirection = 'shorter' } = options;\n\n    // Interpolar lightness y chroma linealmente\n    const l = this._oklch.l + (target._oklch.l - this._oklch.l) * t;\n    const c = this._oklch.c + (target._oklch.c - this._oklch.c) * t;\n\n    // Interpolar hue según dirección\n    const h = interpolateHue(\n      this._oklch.h,\n      target._oklch.h,\n      t,\n      hueDirection\n    );\n\n    // Interpolar alpha\n    const alpha = this._alpha + (target._alpha - this._alpha) * t;\n\n    return new PerceptualColor({ l, c, h }, { alpha });\n  }\n\n  /**\n   * Genera un gradiente hacia otro color.\n   * @param target - Color destino\n   * @param steps - Número de pasos (incluye inicio y fin)\n   */\n  gradient(\n    target: PerceptualColor,\n    steps: number,\n    options: InterpolationOptions = {}\n  ): PerceptualColor[] {\n    const result: PerceptualColor[] = [];\n    for (let i = 0; i < steps; i++) {\n      const t = i / (steps - 1);\n      result.push(this.interpolate(target, t, options));\n    }\n    return result;\n  }\n\n  /**\n   * Obtiene el color complementario.\n   */\n  complement(): PerceptualColor {\n    return this.rotateHue(180);\n  }\n\n  /**\n   * Obtiene colores análogos.\n   * @param angle - Ángulo de separación (default 30°)\n   */\n  analogous(angle = 30): [PerceptualColor, PerceptualColor] {\n    return [this.rotateHue(-angle), this.rotateHue(angle)];\n  }\n\n  /**\n   * Obtiene colores triádicos.\n   */\n  triadic(): [PerceptualColor, PerceptualColor] {\n    return [this.rotateHue(120), this.rotateHue(240)];\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // ANÁLISIS PERCEPTUAL\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Analiza las propiedades perceptuales del color.\n   */\n  analyze(): PerceptualAnalysis {\n    if (!this._analysisCache) {\n      this._analysisCache = this.computeAnalysis();\n    }\n    return this._analysisCache;\n  }\n\n  private computeAnalysis(): PerceptualAnalysis {\n    const { l, c, h } = this._oklch;\n\n    // Determinar warmth basado en hue\n    const warmth = this.computeWarmth(h);\n\n    // Determinar brightness basado en lightness\n    const brightness = l < 0.35 ? 'dark' : l > 0.7 ? 'light' : 'medium';\n\n    // Determinar saturation basado en chroma\n    const saturation =\n      c < 0.03 ? 'desaturated' :\n      c < 0.1 ? 'muted' :\n      c < 0.2 ? 'saturated' : 'vivid';\n\n    // Calcular modo de contraste preferido\n    // (En producción, esto llamaría a Color Intelligence)\n    const contrastResult = this.computeContrastMode();\n\n    return {\n      warmth,\n      brightness,\n      saturation,\n      contrastMode: contrastResult.mode,\n      contrastConfidence: contrastResult.confidence,\n    };\n  }\n\n  private computeWarmth(hue: number): ColorTemperature {\n    // Hue ranges aproximados para temperatura\n    // Warm: 0-60, 300-360 (rojos, naranjas, amarillos, magentas)\n    // Cold: 180-240 (cyans, azules)\n    // Neutral: 60-180, 240-300 (verdes, violetas)\n\n    if ((hue >= 0 && hue < 30) || hue >= 330) return 'hot';\n    if (hue >= 30 && hue < 60) return 'warm';\n    if (hue >= 60 && hue < 150) return 'neutral';\n    if (hue >= 150 && hue < 210) return 'cool';\n    if (hue >= 210 && hue < 270) return 'cold';\n    return 'cool';\n  }\n\n  private computeContrastMode(): { mode: ContrastMode; confidence: ConfidenceLevel } {\n    const { l, c, h } = this._oklch;\n\n    // Multi-factor analysis (simplified version)\n    // En producción usaría Color Intelligence completo\n\n    // Factor 1: OKLCH Lightness (peso 40%)\n    const lightnessScore = l;\n\n    // Factor 2: Warmth adjustment (colores cálidos parecen más claros)\n    const warmth = this.computeWarmth(h);\n    const warmthAdjustment =\n      warmth === 'hot' ? 0.08 :\n      warmth === 'warm' ? 0.05 :\n      warmth === 'cold' ? -0.05 :\n      warmth === 'cool' ? -0.03 : 0;\n\n    // Factor 3: Chroma influence (alta saturación puede afectar)\n    const chromaAdjustment = c > 0.15 ? -0.02 : 0;\n\n    // Score combinado\n    const combinedScore = lightnessScore + warmthAdjustment + chromaAdjustment;\n\n    // Threshold con zona de incertidumbre\n    const threshold = 0.6;\n    const uncertaintyZone = 0.1;\n\n    const mode: ContrastMode = combinedScore > threshold ? 'light-content' : 'dark-content';\n\n    // Confianza basada en distancia al threshold\n    const distanceToThreshold = Math.abs(combinedScore - threshold);\n    const confidence = Math.min(1, distanceToThreshold / uncertaintyZone);\n\n    return {\n      mode,\n      confidence: BrandConstructors.confidenceLevel(confidence),\n    };\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // CONVERSIONES A STRING\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Convierte a string CSS OKLCH.\n   */\n  toCssOklch(): string {\n    const { l, c, h } = this._oklch;\n    if (this._alpha < 1) {\n      return `oklch(${(l * 100).toFixed(1)}% ${c.toFixed(3)} ${h.toFixed(1)} / ${this._alpha})`;\n    }\n    return `oklch(${(l * 100).toFixed(1)}% ${c.toFixed(3)} ${h.toFixed(1)})`;\n  }\n\n  /**\n   * Convierte a string CSS RGB.\n   */\n  toCssRgb(): string {\n    const { r, g, b } = this.rgb;\n    if (this._alpha < 1) {\n      return `rgba(${r}, ${g}, ${b}, ${this._alpha})`;\n    }\n    return `rgb(${r}, ${g}, ${b})`;\n  }\n\n  /**\n   * Convierte a string CSS HSL.\n   */\n  toCssHsl(): string {\n    const { h, s, l } = this.hsl;\n    if (this._alpha < 1) {\n      return `hsla(${h.toFixed(0)}, ${s.toFixed(0)}%, ${l.toFixed(0)}%, ${this._alpha})`;\n    }\n    return `hsl(${h.toFixed(0)}, ${s.toFixed(0)}%, ${l.toFixed(0)}%)`;\n  }\n\n  /**\n   * Representación por defecto es hex.\n   */\n  toString(): string {\n    return this.hex;\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // COMPARACIÓN\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Calcula la diferencia perceptual (Delta E OKLCH).\n   */\n  deltaE(other: PerceptualColor): number {\n    const dL = this._oklch.l - other._oklch.l;\n    const dC = this._oklch.c - other._oklch.c;\n\n    // Diferencia de hue en radianes\n    const h1 = (this._oklch.h * Math.PI) / 180;\n    const h2 = (other._oklch.h * Math.PI) / 180;\n    const dH = 2 * Math.sqrt(this._oklch.c * other._oklch.c) *\n               Math.sin((h1 - h2) / 2);\n\n    return Math.sqrt(dL * dL + dC * dC + dH * dH);\n  }\n\n  /**\n   * Verifica si dos colores son perceptualmente similares.\n   * @param other - Otro color\n   * @param threshold - Umbral de Delta E (default 0.02)\n   */\n  isSimilarTo(other: PerceptualColor, threshold = 0.02): boolean {\n    return this.deltaE(other) < threshold;\n  }\n\n  /**\n   * Verifica igualdad estructural.\n   */\n  equals(other: PerceptualColor): boolean {\n    return (\n      this._oklch.l === other._oklch.l &&\n      this._oklch.c === other._oklch.c &&\n      this._oklch.h === other._oklch.h &&\n      this._alpha === other._alpha\n    );\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // SERIALIZACIÓN\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Serializa a objeto JSON.\n   */\n  toJSON(): {\n    oklch: OklchCoordinates;\n    hex: string;\n    alpha: number;\n    gamutMapped: boolean;\n  } {\n    return {\n      oklch: { ...this._oklch },\n      hex: this.hex,\n      alpha: this._alpha,\n      gamutMapped: this._gamutMapped,\n    };\n  }\n\n  /**\n   * Crea desde objeto JSON.\n   */\n  static fromJSON(json: { oklch: OklchCoordinates; alpha?: number }): PerceptualColor {\n    return new PerceptualColor(json.oklch, { alpha: json.alpha });\n  }\n}\n\n// ============================================================================\n// HELPER FUNCTIONS (Conversiones de color)\n// ============================================================================\n\n/**\n * Convierte hex a RGB.\n */\nfunction hexToRgb(hex: string): RgbCoordinates {\n  const clean = hex.replace('#', '');\n  const expanded = clean.length === 3\n    ? clean.split('').map(c => c + c).join('')\n    : clean;\n\n  const num = parseInt(expanded, 16);\n  return {\n    r: (num >> 16) & 255,\n    g: (num >> 8) & 255,\n    b: num & 255,\n  };\n}\n\n/**\n * Convierte RGB a hex.\n */\nfunction rgbToHex(rgb: RgbCoordinates): HexColor {\n  const toHex = (n: number) => Math.round(n).toString(16).padStart(2, '0');\n  return `#${toHex(rgb.r)}${toHex(rgb.g)}${toHex(rgb.b)}` as HexColor;\n}\n\n/**\n * Convierte RGB a OKLCH.\n * Implementación simplificada - en producción usaría Color Intelligence.\n */\nfunction rgbToOklch(rgb: RgbCoordinates): OklchCoordinates {\n  // Normalizar a 0-1\n  const r = rgb.r / 255;\n  const g = rgb.g / 255;\n  const b = rgb.b / 255;\n\n  // RGB lineal (gamma correction inversa)\n  const toLinear = (c: number) =>\n    c <= 0.04045 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n\n  const lr = toLinear(r);\n  const lg = toLinear(g);\n  const lb = toLinear(b);\n\n  // RGB a OKLab\n  const l_ = 0.4122214708 * lr + 0.5363325363 * lg + 0.0514459929 * lb;\n  const m_ = 0.2119034982 * lr + 0.6806995451 * lg + 0.1073969566 * lb;\n  const s_ = 0.0883024619 * lr + 0.2817188376 * lg + 0.6299787005 * lb;\n\n  const l = Math.cbrt(l_);\n  const m = Math.cbrt(m_);\n  const s = Math.cbrt(s_);\n\n  const L = 0.2104542553 * l + 0.7936177850 * m - 0.0040720468 * s;\n  const a = 1.9779984951 * l - 2.4285922050 * m + 0.4505937099 * s;\n  const bOk = 0.0259040371 * l + 0.7827717662 * m - 0.8086757660 * s;\n\n  // OKLab a OKLCH\n  const C = Math.sqrt(a * a + bOk * bOk);\n  let h = (Math.atan2(bOk, a) * 180) / Math.PI;\n  if (h < 0) h += 360;\n\n  return { l: L, c: C, h };\n}\n\n/**\n * Convierte OKLCH a RGB.\n * Implementación simplificada - en producción usaría Color Intelligence.\n */\nfunction oklchToRgb(oklch: OklchCoordinates): RgbCoordinates {\n  const { l: L, c: C, h } = oklch;\n\n  // OKLCH a OKLab\n  const hRad = (h * Math.PI) / 180;\n  const a = C * Math.cos(hRad);\n  const b = C * Math.sin(hRad);\n\n  // OKLab a RGB lineal\n  const l_ = L + 0.3963377774 * a + 0.2158037573 * b;\n  const m_ = L - 0.1055613458 * a - 0.0638541728 * b;\n  const s_ = L - 0.0894841775 * a - 1.2914855480 * b;\n\n  const l = l_ * l_ * l_;\n  const m = m_ * m_ * m_;\n  const s = s_ * s_ * s_;\n\n  let lr = +4.0767416621 * l - 3.3077115913 * m + 0.2309699292 * s;\n  let lg = -1.2684380046 * l + 2.6097574011 * m - 0.3413193965 * s;\n  let lb = -0.0041960863 * l - 0.7034186147 * m + 1.7076147010 * s;\n\n  // Gamma correction y clamp\n  const toGamma = (c: number) =>\n    c <= 0.0031308 ? 12.92 * c : 1.055 * Math.pow(c, 1 / 2.4) - 0.055;\n\n  lr = Math.max(0, Math.min(1, toGamma(lr)));\n  lg = Math.max(0, Math.min(1, toGamma(lg)));\n  lb = Math.max(0, Math.min(1, toGamma(lb)));\n\n  return {\n    r: Math.round(lr * 255),\n    g: Math.round(lg * 255),\n    b: Math.round(lb * 255),\n  };\n}\n\n/**\n * Convierte RGB a HSL.\n */\nfunction rgbToHsl(rgb: RgbCoordinates): HslCoordinates {\n  const r = rgb.r / 255;\n  const g = rgb.g / 255;\n  const b = rgb.b / 255;\n\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n\n  if (max === min) {\n    return { h: 0, s: 0, l: l * 100 };\n  }\n\n  const d = max - min;\n  const s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n  let h = 0;\n  switch (max) {\n    case r:\n      h = ((g - b) / d + (g < b ? 6 : 0)) / 6;\n      break;\n    case g:\n      h = ((b - r) / d + 2) / 6;\n      break;\n    case b:\n      h = ((r - g) / d + 4) / 6;\n      break;\n  }\n\n  return {\n    h: h * 360,\n    s: s * 100,\n    l: l * 100,\n  };\n}\n\n/**\n * Interpola hue según dirección.\n */\nfunction interpolateHue(\n  h1: number,\n  h2: number,\n  t: number,\n  direction: 'shorter' | 'longer' | 'increasing' | 'decreasing'\n): number {\n  let diff = h2 - h1;\n\n  switch (direction) {\n    case 'shorter':\n      if (diff > 180) diff -= 360;\n      else if (diff < -180) diff += 360;\n      break;\n    case 'longer':\n      if (diff > 0 && diff < 180) diff -= 360;\n      else if (diff < 0 && diff > -180) diff += 360;\n      break;\n    case 'increasing':\n      if (diff < 0) diff += 360;\n      break;\n    case 'decreasing':\n      if (diff > 0) diff -= 360;\n      break;\n  }\n\n  let result = h1 + diff * t;\n  return ((result % 360) + 360) % 360;\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport default PerceptualColor;\n","/**\n * @fileoverview AccessibilityService - Domain Service for Contrast Calculations\n *\n * Servicio de dominio puro para cálculos de accesibilidad de color.\n * Implementa WCAG 2.1 y APCA (Accessible Perceptual Contrast Algorithm).\n *\n * Principios:\n * - Sin dependencias externas (pure domain logic)\n * - Inmutable (stateless)\n * - Algoritmos documentados con fuentes\n *\n * @module momoto-ui/domain/perceptual/services/AccessibilityService\n * @version 1.0.0\n */\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Representación RGB normalizada (0-255).\n */\nexport interface RgbColor {\n  readonly r: number;\n  readonly g: number;\n  readonly b: number;\n}\n\n/**\n * Niveles WCAG 2.1 para contraste.\n */\nexport type WcagLevel = 'AAA' | 'AA' | 'AA-large' | 'Fail';\n\n/**\n * Niveles APCA para diferentes usos de texto.\n * Lc = Lightness Contrast\n */\nexport type ApcaLevel = 'Lc75' | 'Lc60' | 'Lc45' | 'Lc30' | 'Lc15' | 'Fail';\n\n/**\n * Resultado de evaluación de contraste.\n */\nexport interface ContrastEvaluation {\n  readonly wcagRatio: number;\n  readonly wcagLevel: WcagLevel;\n  readonly apcaValue: number;\n  readonly apcaLevel: ApcaLevel;\n  readonly meetsWcagAA: boolean;\n  readonly meetsWcagAAA: boolean;\n  readonly meetsApcaBody: boolean;\n  readonly meetsApcaHeading: boolean;\n  readonly meetsApcaUI: boolean;\n}\n\n/**\n * Thresholds para WCAG.\n */\nexport const WCAG_THRESHOLDS = Object.freeze({\n  AAA: 7,\n  AA: 4.5,\n  'AA-large': 3,\n} as const);\n\n/**\n * Thresholds para APCA.\n * @see https://www.myndex.com/APCA/\n */\nexport const APCA_THRESHOLDS = Object.freeze({\n  Lc75: 75,  // Body text (12px+)\n  Lc60: 60,  // Large text (18px+), sub-fluent text\n  Lc45: 45,  // Headings, large icons\n  Lc30: 30,  // Spot text, non-essential\n  Lc15: 15,  // Minimum discernible\n} as const);\n\n// ============================================================================\n// ACCESSIBILITY SERVICE\n// ============================================================================\n\n/**\n * AccessibilityService - Servicio de dominio para cálculos de accesibilidad.\n *\n * Implementa:\n * - WCAG 2.1 Relative Luminance y Contrast Ratio\n * - APCA (Accessible Perceptual Contrast Algorithm)\n *\n * @example\n * ```typescript\n * const service = new AccessibilityService();\n *\n * const bg = { r: 255, g: 255, b: 255 };\n * const fg = { r: 0, g: 0, b: 0 };\n *\n * const evaluation = service.evaluate(bg, fg);\n * console.log(evaluation.wcagLevel); // 'AAA'\n * console.log(evaluation.apcaLevel); // 'Lc75'\n * ```\n */\nexport class AccessibilityService {\n  // ─────────────────────────────────────────────────────────────────────────\n  // PUBLIC API\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Evalúa el contraste entre dos colores.\n   * Retorna métricas WCAG y APCA.\n   */\n  evaluate(background: RgbColor, foreground: RgbColor): ContrastEvaluation {\n    const wcagRatio = this.calculateWcagContrast(background, foreground);\n    const apcaValue = this.calculateApcaContrast(background, foreground);\n\n    return Object.freeze({\n      wcagRatio,\n      wcagLevel: this.getWcagLevel(wcagRatio),\n      apcaValue,\n      apcaLevel: this.getApcaLevel(apcaValue),\n      meetsWcagAA: wcagRatio >= WCAG_THRESHOLDS.AA,\n      meetsWcagAAA: wcagRatio >= WCAG_THRESHOLDS.AAA,\n      meetsApcaBody: Math.abs(apcaValue) >= APCA_THRESHOLDS.Lc60,\n      meetsApcaHeading: Math.abs(apcaValue) >= APCA_THRESHOLDS.Lc45,\n      meetsApcaUI: Math.abs(apcaValue) >= APCA_THRESHOLDS.Lc30,\n    });\n  }\n\n  /**\n   * Calcula ratio de contraste WCAG 2.1.\n   * @see https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html\n   */\n  calculateWcagContrast(background: RgbColor, foreground: RgbColor): number {\n    const l1 = this.relativeLuminance(background);\n    const l2 = this.relativeLuminance(foreground);\n\n    const lighter = Math.max(l1, l2);\n    const darker = Math.min(l1, l2);\n\n    return (lighter + 0.05) / (darker + 0.05);\n  }\n\n  /**\n   * Calcula valor de contraste APCA.\n   *\n   * Implementación simplificada del algoritmo APCA.\n   * Para producción, considerar usar la librería oficial apca-w3.\n   *\n   * @see https://github.com/Myndex/SAPC-APCA\n   * @see https://www.myndex.com/APCA/\n   */\n  calculateApcaContrast(background: RgbColor, foreground: RgbColor): number {\n    const yBg = this.apcaLuminance(background);\n    const yFg = this.apcaLuminance(foreground);\n\n    // Polarity: positive = dark text on light bg, negative = light text on dark bg\n    const polarity = yBg > yFg ? 1 : -1;\n\n    // SAPC calculation with simplified exponents\n    // Based on APCA-W3 0.0.98G-4g\n    const normBG = Math.pow(yBg, 0.56);\n    const normTXT = Math.pow(yFg, 0.57);\n\n    const SAPC = (normBG - normTXT) * 1.14;\n\n    // Scale to Lc (0-100+)\n    return SAPC * 100 * polarity;\n  }\n\n  /**\n   * Determina nivel WCAG basado en ratio de contraste.\n   */\n  getWcagLevel(ratio: number): WcagLevel {\n    if (ratio >= WCAG_THRESHOLDS.AAA) return 'AAA';\n    if (ratio >= WCAG_THRESHOLDS.AA) return 'AA';\n    if (ratio >= WCAG_THRESHOLDS['AA-large']) return 'AA-large';\n    return 'Fail';\n  }\n\n  /**\n   * Determina nivel APCA basado en valor Lc.\n   */\n  getApcaLevel(lc: number): ApcaLevel {\n    const absLc = Math.abs(lc);\n    if (absLc >= APCA_THRESHOLDS.Lc75) return 'Lc75';\n    if (absLc >= APCA_THRESHOLDS.Lc60) return 'Lc60';\n    if (absLc >= APCA_THRESHOLDS.Lc45) return 'Lc45';\n    if (absLc >= APCA_THRESHOLDS.Lc30) return 'Lc30';\n    if (absLc >= APCA_THRESHOLDS.Lc15) return 'Lc15';\n    return 'Fail';\n  }\n\n  /**\n   * Sugiere color de texto óptimo para un fondo dado.\n   */\n  suggestTextColor(\n    background: RgbColor,\n    preferDark: boolean = true\n  ): { color: RgbColor; evaluation: ContrastEvaluation } {\n    const white: RgbColor = { r: 255, g: 255, b: 255 };\n    const black: RgbColor = { r: 0, g: 0, b: 0 };\n\n    const whiteEval = this.evaluate(background, white);\n    const blackEval = this.evaluate(background, black);\n\n    // Use APCA contrast, with preferDark as tiebreaker\n    const whiteBetter = Math.abs(whiteEval.apcaValue) > Math.abs(blackEval.apcaValue);\n    const blackBetter = Math.abs(blackEval.apcaValue) > Math.abs(whiteEval.apcaValue);\n    const useWhite = whiteBetter || (!blackBetter && !preferDark);\n\n    if (useWhite) {\n      return { color: white, evaluation: whiteEval };\n    } else {\n      return { color: black, evaluation: blackEval };\n    }\n  }\n\n  /**\n   * Verifica si un par de colores cumple requisitos mínimos.\n   */\n  meetsMinimumRequirements(\n    background: RgbColor,\n    foreground: RgbColor,\n    options: {\n      wcagLevel?: 'AA' | 'AAA';\n      apcaMinimum?: number;\n    } = {}\n  ): boolean {\n    const { wcagLevel = 'AA', apcaMinimum = APCA_THRESHOLDS.Lc45 } = options;\n    const evaluation = this.evaluate(background, foreground);\n\n    const wcagThreshold = wcagLevel === 'AAA' ? WCAG_THRESHOLDS.AAA : WCAG_THRESHOLDS.AA;\n\n    return (\n      evaluation.wcagRatio >= wcagThreshold &&\n      Math.abs(evaluation.apcaValue) >= apcaMinimum\n    );\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // PRIVATE HELPERS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Calcula luminancia relativa WCAG.\n   * @see https://www.w3.org/WAI/GL/wiki/Relative_luminance\n   */\n  private relativeLuminance(rgb: RgbColor): number {\n    const [r, g, b] = [rgb.r, rgb.g, rgb.b].map(channel => {\n      const normalized = channel / 255;\n      return normalized <= 0.03928\n        ? normalized / 12.92\n        : Math.pow((normalized + 0.055) / 1.055, 2.4);\n    });\n\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  }\n\n  /**\n   * Calcula luminancia perceptual APCA (Y).\n   * Coeficientes específicos de APCA.\n   */\n  private apcaLuminance(rgb: RgbColor): number {\n    const [r, g, b] = [rgb.r, rgb.g, rgb.b].map(channel =>\n      Math.pow(channel / 255, 2.4)\n    );\n\n    return 0.2126729 * r + 0.7151522 * g + 0.0721750 * b;\n  }\n}\n\n// ============================================================================\n// SINGLETON INSTANCE\n// ============================================================================\n\n/**\n * Instancia singleton para uso conveniente.\n */\nexport const accessibilityService = new AccessibilityService();\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport default AccessibilityService;\n","/**\n * @fileoverview EnterprisePolicy Value Object\n *\n * Immutable value object representing an enterprise-wide design policy.\n * Policies define rules that must be enforced across all products.\n *\n * Cross-cutting concerns addressed:\n * - Accessibility compliance (WCAG/APCA)\n * - Brand color governance\n * - Token naming conventions\n * - Theme consistency rules\n * - Audit/traceability requirements\n *\n * @module momoto-ui/domain/governance/value-objects/EnterprisePolicy\n * @version 1.0.0\n */\n\nimport type { Result, PolicyEnforcement, PolicyCategory } from '../../types';\nimport { success, failure } from '../../types';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Severity level for policy violations.\n */\nexport type PolicySeverity = 'critical' | 'high' | 'medium' | 'low' | 'info';\n\n/**\n * Policy scope defines where the policy applies.\n */\nexport type PolicyScope =\n  | 'global'           // Applies everywhere\n  | 'component'        // Applies to specific components\n  | 'token'            // Applies to token generation\n  | 'theme'            // Applies to theme composition\n  | 'accessibility';   // Applies to accessibility checks\n\n/**\n * Policy evaluation context.\n */\nexport interface PolicyContext {\n  readonly scope: PolicyScope;\n  readonly componentName?: string;\n  readonly tokenPath?: string[];\n  readonly themeMode?: 'light' | 'dark';\n  readonly brandColor?: string;\n  readonly metadata?: Record<string, unknown>;\n}\n\n/**\n * Policy violation details.\n */\nexport interface PolicyViolationDetail {\n  readonly policyId: string;\n  readonly policyName: string;\n  readonly severity: PolicySeverity;\n  readonly message: string;\n  readonly context: PolicyContext;\n  readonly suggestion?: string;\n  readonly autoFixable: boolean;\n}\n\n/**\n * Policy evaluation result.\n */\nexport interface PolicyEvaluationResult {\n  readonly passed: boolean;\n  readonly violations: readonly PolicyViolationDetail[];\n  readonly warnings: readonly PolicyViolationDetail[];\n  readonly score: number; // 0-100 compliance score\n  readonly evaluatedAt: Date;\n}\n\n/**\n * Configuration for creating an EnterprisePolicy.\n */\nexport interface EnterprisePolicyConfig {\n  readonly id: string;\n  readonly name: string;\n  readonly description: string;\n  readonly category: PolicyCategory;\n  readonly scope: PolicyScope;\n  readonly enforcement: PolicyEnforcement;\n  readonly severity: PolicySeverity;\n  readonly version: string;\n  readonly rules: readonly PolicyRule[];\n  readonly enabled?: boolean;\n  readonly metadata?: Record<string, unknown>;\n}\n\n/**\n * Individual policy rule.\n */\nexport interface PolicyRule {\n  readonly id: string;\n  readonly name: string;\n  readonly condition: PolicyCondition;\n  readonly message: string;\n  readonly suggestion?: string;\n  readonly autoFixable: boolean;\n}\n\n/**\n * Policy condition types.\n */\nexport type PolicyCondition =\n  | AccessibilityCondition\n  | ColorCondition\n  | TokenCondition\n  | ThemeCondition\n  | CustomCondition;\n\nexport interface AccessibilityCondition {\n  readonly type: 'accessibility';\n  readonly standard: 'wcag-aa' | 'wcag-aaa' | 'apca-body' | 'apca-ui';\n  readonly minContrast?: number;\n}\n\nexport interface ColorCondition {\n  readonly type: 'color';\n  readonly check: 'brand-alignment' | 'harmony' | 'saturation' | 'lightness';\n  readonly threshold?: number;\n  readonly tolerance?: number;\n}\n\nexport interface TokenCondition {\n  readonly type: 'token';\n  readonly check: 'naming-convention' | 'hierarchy' | 'completeness' | 'consistency';\n  readonly pattern?: string;\n  readonly requiredTokens?: string[];\n}\n\nexport interface ThemeCondition {\n  readonly type: 'theme';\n  readonly check: 'mode-coverage' | 'semantic-mapping' | 'scale-consistency';\n  readonly modes?: ('light' | 'dark')[];\n}\n\nexport interface CustomCondition {\n  readonly type: 'custom';\n  readonly evaluator: string; // Reference to a registered evaluator function\n  readonly params?: Record<string, unknown>;\n}\n\n// ============================================================================\n// VALUE OBJECT\n// ============================================================================\n\n/**\n * EnterprisePolicy - Immutable value object for enterprise design policies.\n *\n * Represents a single governance rule that can be evaluated against\n * design decisions, tokens, themes, or components.\n *\n * @example\n * ```typescript\n * const policy = EnterprisePolicy.create({\n *   id: 'accessibility-wcag-aa',\n *   name: 'WCAG AA Compliance',\n *   description: 'All text must meet WCAG AA contrast requirements',\n *   category: 'accessibility',\n *   scope: 'accessibility',\n *   enforcement: 'required',\n *   severity: 'critical',\n *   version: '1.0.0',\n *   rules: [{\n *     id: 'min-contrast',\n *     name: 'Minimum Contrast',\n *     condition: { type: 'accessibility', standard: 'wcag-aa', minContrast: 4.5 },\n *     message: 'Text contrast ratio must be at least 4.5:1',\n *     suggestion: 'Increase color difference between text and background',\n *     autoFixable: true,\n *   }],\n * });\n * ```\n */\nexport class EnterprisePolicy {\n  // ─────────────────────────────────────────────────────────────────────────\n  // PROPERTIES\n  // ─────────────────────────────────────────────────────────────────────────\n\n  readonly id: string;\n  readonly name: string;\n  readonly description: string;\n  readonly category: PolicyCategory;\n  readonly scope: PolicyScope;\n  readonly enforcement: PolicyEnforcement;\n  readonly severity: PolicySeverity;\n  readonly version: string;\n  readonly rules: readonly PolicyRule[];\n  readonly enabled: boolean;\n  readonly metadata: Readonly<Record<string, unknown>>;\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // CONSTRUCTOR\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private constructor(config: EnterprisePolicyConfig) {\n    this.id = config.id;\n    this.name = config.name;\n    this.description = config.description;\n    this.category = config.category;\n    this.scope = config.scope;\n    this.enforcement = config.enforcement;\n    this.severity = config.severity;\n    this.version = config.version;\n    this.rules = Object.freeze([...config.rules]);\n    this.enabled = config.enabled ?? true;\n    this.metadata = Object.freeze({ ...config.metadata });\n    Object.freeze(this);\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // FACTORY METHODS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Creates a new EnterprisePolicy from configuration.\n   */\n  static create(config: EnterprisePolicyConfig): Result<EnterprisePolicy, Error> {\n    const validation = EnterprisePolicy.validate(config);\n    if (!validation.valid) {\n      return failure(new Error(validation.errors.join('; ')));\n    }\n    return success(new EnterprisePolicy(config));\n  }\n\n  /**\n   * Creates a policy without validation (for internal use).\n   */\n  static unsafe(config: EnterprisePolicyConfig): EnterprisePolicy {\n    return new EnterprisePolicy(config);\n  }\n\n  /**\n   * Validates policy configuration.\n   */\n  static validate(config: EnterprisePolicyConfig): { valid: boolean; errors: string[] } {\n    const errors: string[] = [];\n\n    if (!config.id || config.id.trim().length === 0) {\n      errors.push('Policy ID is required');\n    }\n    if (!config.name || config.name.trim().length === 0) {\n      errors.push('Policy name is required');\n    }\n    if (!config.description || config.description.trim().length === 0) {\n      errors.push('Policy description is required');\n    }\n    if (!config.rules || config.rules.length === 0) {\n      errors.push('Policy must have at least one rule');\n    }\n    if (!/^\\d+\\.\\d+\\.\\d+$/.test(config.version)) {\n      errors.push('Policy version must be in semver format (x.y.z)');\n    }\n\n    return { valid: errors.length === 0, errors };\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // INSTANCE METHODS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Checks if this policy applies to a given context.\n   */\n  appliesTo(context: PolicyContext): boolean {\n    if (!this.enabled) return false;\n    if (this.scope === 'global') return true;\n    return this.scope === context.scope;\n  }\n\n  /**\n   * Returns a new policy with enabled state toggled.\n   */\n  withEnabled(enabled: boolean): EnterprisePolicy {\n    return new EnterprisePolicy({\n      id: this.id,\n      name: this.name,\n      description: this.description,\n      category: this.category,\n      scope: this.scope,\n      enforcement: this.enforcement,\n      severity: this.severity,\n      version: this.version,\n      rules: this.rules,\n      enabled,\n      metadata: this.metadata,\n    });\n  }\n\n  /**\n   * Returns a new policy with updated metadata.\n   */\n  withMetadata(metadata: Record<string, unknown>): EnterprisePolicy {\n    return new EnterprisePolicy({\n      id: this.id,\n      name: this.name,\n      description: this.description,\n      category: this.category,\n      scope: this.scope,\n      enforcement: this.enforcement,\n      severity: this.severity,\n      version: this.version,\n      rules: this.rules,\n      enabled: this.enabled,\n      metadata: { ...this.metadata, ...metadata },\n    });\n  }\n\n  /**\n   * Checks if policy is blocking (must pass for operation to proceed).\n   */\n  isBlocking(): boolean {\n    return this.enforcement === 'required' && this.severity === 'critical';\n  }\n\n  /**\n   * Checks if policy is advisory only (warnings, not errors).\n   */\n  isAdvisory(): boolean {\n    return this.enforcement === 'optional' || this.severity === 'info';\n  }\n\n  /**\n   * Gets the weight of this policy for scoring.\n   */\n  getWeight(): number {\n    const severityWeights: Record<PolicySeverity, number> = {\n      critical: 10,\n      high: 7,\n      medium: 5,\n      low: 3,\n      info: 1,\n    };\n\n    const enforcementMultiplier: Record<PolicyEnforcement, number> = {\n      required: 2.0,\n      recommended: 1.5,\n      optional: 1.0,\n    };\n\n    return severityWeights[this.severity] * enforcementMultiplier[this.enforcement];\n  }\n\n  /**\n   * Serializes policy to plain object.\n   */\n  toJSON(): EnterprisePolicyConfig {\n    return {\n      id: this.id,\n      name: this.name,\n      description: this.description,\n      category: this.category,\n      scope: this.scope,\n      enforcement: this.enforcement,\n      severity: this.severity,\n      version: this.version,\n      rules: [...this.rules],\n      enabled: this.enabled,\n      metadata: { ...this.metadata },\n    };\n  }\n\n  /**\n   * Checks equality with another policy.\n   */\n  equals(other: EnterprisePolicy): boolean {\n    return this.id === other.id && this.version === other.version;\n  }\n}\n\n// ============================================================================\n// POLICY COLLECTION\n// ============================================================================\n\n/**\n * PolicySet - Collection of enterprise policies.\n */\nexport class PolicySet {\n  private readonly policies: Map<string, EnterprisePolicy>;\n\n  constructor(policies: EnterprisePolicy[] = []) {\n    this.policies = new Map(policies.map(p => [p.id, p]));\n    Object.freeze(this);\n  }\n\n  /**\n   * Gets a policy by ID.\n   */\n  get(id: string): EnterprisePolicy | undefined {\n    return this.policies.get(id);\n  }\n\n  /**\n   * Gets all policies.\n   */\n  all(): readonly EnterprisePolicy[] {\n    return Object.freeze([...this.policies.values()]);\n  }\n\n  /**\n   * Filters policies by scope.\n   */\n  byScope(scope: PolicyScope): readonly EnterprisePolicy[] {\n    return this.all().filter(p => p.scope === scope || p.scope === 'global');\n  }\n\n  /**\n   * Filters policies by category.\n   */\n  byCategory(category: PolicyCategory): readonly EnterprisePolicy[] {\n    return this.all().filter(p => p.category === category);\n  }\n\n  /**\n   * Filters policies by enforcement level.\n   */\n  byEnforcement(enforcement: PolicyEnforcement): readonly EnterprisePolicy[] {\n    return this.all().filter(p => p.enforcement === enforcement);\n  }\n\n  /**\n   * Gets only enabled policies.\n   */\n  enabled(): readonly EnterprisePolicy[] {\n    return this.all().filter(p => p.enabled);\n  }\n\n  /**\n   * Gets blocking policies (must pass).\n   */\n  blocking(): readonly EnterprisePolicy[] {\n    return this.all().filter(p => p.isBlocking());\n  }\n\n  /**\n   * Adds a policy and returns new set.\n   */\n  add(policy: EnterprisePolicy): PolicySet {\n    const newPolicies = [...this.policies.values(), policy];\n    return new PolicySet(newPolicies);\n  }\n\n  /**\n   * Removes a policy and returns new set.\n   */\n  remove(id: string): PolicySet {\n    const newPolicies = [...this.policies.values()].filter(p => p.id !== id);\n    return new PolicySet(newPolicies);\n  }\n\n  /**\n   * Gets policies that apply to a context.\n   */\n  applicableTo(context: PolicyContext): readonly EnterprisePolicy[] {\n    return this.enabled().filter(p => p.appliesTo(context));\n  }\n\n  /**\n   * Returns count of policies.\n   */\n  get size(): number {\n    return this.policies.size;\n  }\n\n  /**\n   * Checks if set is empty.\n   */\n  isEmpty(): boolean {\n    return this.policies.size === 0;\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport default EnterprisePolicy;\n","/**\n * @fileoverview GovernanceEvaluator Domain Service\n *\n * Pure domain service for evaluating design decisions against enterprise policies.\n * No external dependencies - operates solely on domain types.\n *\n * @module momoto-ui/domain/governance/services/GovernanceEvaluator\n * @version 1.0.0\n */\n\nimport type {\n  EnterprisePolicy,\n  PolicySet,\n  PolicyContext,\n  PolicyEvaluationResult,\n  PolicyViolationDetail,\n  PolicyRule,\n  AccessibilityCondition,\n  ColorCondition,\n  TokenCondition,\n  ThemeCondition,\n} from '../value-objects/EnterprisePolicy';\nimport type { PerceptualColor } from '../../perceptual';\nimport type { TokenCollection } from '../../tokens';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Input for governance evaluation.\n */\nexport interface GovernanceEvaluationInput {\n  readonly context: PolicyContext;\n  readonly color?: PerceptualColor;\n  readonly tokens?: TokenCollection;\n  readonly contrastRatio?: number;\n  readonly apcaValue?: number;\n  readonly tokenNames?: string[];\n  readonly themeHasLightMode?: boolean;\n  readonly themeHasDarkMode?: boolean;\n}\n\n/**\n * Aggregated evaluation result across all policies.\n */\nexport interface AggregatedEvaluationResult {\n  readonly overallPassed: boolean;\n  readonly overallScore: number;\n  readonly totalPolicies: number;\n  readonly passedPolicies: number;\n  readonly failedPolicies: number;\n  readonly criticalViolations: readonly PolicyViolationDetail[];\n  readonly allViolations: readonly PolicyViolationDetail[];\n  readonly allWarnings: readonly PolicyViolationDetail[];\n  readonly byCategory: Map<string, PolicyEvaluationResult>;\n  readonly evaluatedAt: Date;\n  readonly blockingViolations: boolean;\n}\n\n/**\n * Custom evaluator function type.\n */\nexport type CustomEvaluatorFn = (\n  input: GovernanceEvaluationInput,\n  params?: Record<string, unknown>\n) => { passed: boolean; message?: string };\n\n// ============================================================================\n// GOVERNANCE EVALUATOR SERVICE\n// ============================================================================\n\n/**\n * GovernanceEvaluator - Domain service for policy evaluation.\n *\n * Stateless service that evaluates design decisions against a set of policies.\n * Uses pure functions and domain types only.\n *\n * @example\n * ```typescript\n * const evaluator = new GovernanceEvaluator();\n *\n * const result = evaluator.evaluate(policySet, {\n *   context: { scope: 'accessibility' },\n *   contrastRatio: 4.2,\n * });\n *\n * if (!result.overallPassed) {\n *   console.log('Violations:', result.criticalViolations);\n * }\n * ```\n */\nexport class GovernanceEvaluator {\n  // ─────────────────────────────────────────────────────────────────────────\n  // CUSTOM EVALUATORS REGISTRY\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private readonly customEvaluators: Map<string, CustomEvaluatorFn> = new Map();\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // PUBLIC API\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Registers a custom evaluator function.\n   */\n  registerCustomEvaluator(name: string, evaluator: CustomEvaluatorFn): void {\n    this.customEvaluators.set(name, evaluator);\n  }\n\n  /**\n   * Evaluates input against all applicable policies.\n   */\n  evaluate(policySet: PolicySet, input: GovernanceEvaluationInput): AggregatedEvaluationResult {\n    const applicablePolicies = policySet.applicableTo(input.context);\n    const evaluatedAt = new Date();\n\n    const results: Array<{ policy: EnterprisePolicy; result: PolicyEvaluationResult }> = [];\n\n    for (const policy of applicablePolicies) {\n      const result = this.evaluatePolicy(policy, input);\n      results.push({ policy, result });\n    }\n\n    return this.aggregateResults(results, evaluatedAt);\n  }\n\n  /**\n   * Evaluates a single policy.\n   */\n  evaluatePolicy(policy: EnterprisePolicy, input: GovernanceEvaluationInput): PolicyEvaluationResult {\n    const violations: PolicyViolationDetail[] = [];\n    const warnings: PolicyViolationDetail[] = [];\n\n    for (const rule of policy.rules) {\n      const ruleResult = this.evaluateRule(policy, rule, input);\n\n      if (!ruleResult.passed) {\n        const violation: PolicyViolationDetail = {\n          policyId: policy.id,\n          policyName: policy.name,\n          severity: policy.severity,\n          message: ruleResult.message || rule.message,\n          context: input.context,\n          suggestion: rule.suggestion,\n          autoFixable: rule.autoFixable,\n        };\n\n        if (policy.isAdvisory()) {\n          warnings.push(violation);\n        } else {\n          violations.push(violation);\n        }\n      }\n    }\n\n    const totalRules = policy.rules.length;\n    const passedRules = totalRules - violations.length - warnings.length;\n    const score = totalRules > 0 ? (passedRules / totalRules) * 100 : 100;\n\n    return Object.freeze({\n      passed: violations.length === 0,\n      violations: Object.freeze(violations),\n      warnings: Object.freeze(warnings),\n      score,\n      evaluatedAt: new Date(),\n    });\n  }\n\n  /**\n   * Quickly checks if all blocking policies pass.\n   */\n  passesBlockingPolicies(policySet: PolicySet, input: GovernanceEvaluationInput): boolean {\n    const blockingPolicies = policySet.blocking();\n\n    for (const policy of blockingPolicies) {\n      if (!policy.appliesTo(input.context)) continue;\n\n      const result = this.evaluatePolicy(policy, input);\n      if (!result.passed) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Gets all auto-fixable violations.\n   */\n  getAutoFixableViolations(result: AggregatedEvaluationResult): readonly PolicyViolationDetail[] {\n    return result.allViolations.filter(v => v.autoFixable);\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // RULE EVALUATION\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Evaluates a single rule.\n   */\n  private evaluateRule(\n    _policy: EnterprisePolicy,\n    rule: PolicyRule,\n    input: GovernanceEvaluationInput\n  ): { passed: boolean; message?: string } {\n    const condition = rule.condition;\n\n    switch (condition.type) {\n      case 'accessibility':\n        return this.evaluateAccessibilityCondition(condition, input);\n      case 'color':\n        return this.evaluateColorCondition(condition, input);\n      case 'token':\n        return this.evaluateTokenCondition(condition, input);\n      case 'theme':\n        return this.evaluateThemeCondition(condition, input);\n      case 'custom':\n        return this.evaluateCustomCondition(condition.evaluator, condition.params, input);\n      default:\n        return { passed: true };\n    }\n  }\n\n  /**\n   * Evaluates accessibility conditions.\n   */\n  private evaluateAccessibilityCondition(\n    condition: AccessibilityCondition,\n    input: GovernanceEvaluationInput\n  ): { passed: boolean; message?: string } {\n    const { contrastRatio, apcaValue } = input;\n\n    switch (condition.standard) {\n      case 'wcag-aa':\n        if (contrastRatio === undefined) return { passed: true }; // Skip if no data\n        const aaThreshold = condition.minContrast ?? 4.5;\n        if (contrastRatio < aaThreshold) {\n          return {\n            passed: false,\n            message: `WCAG AA requires contrast ratio >= ${aaThreshold}:1, got ${contrastRatio.toFixed(2)}:1`,\n          };\n        }\n        return { passed: true };\n\n      case 'wcag-aaa':\n        if (contrastRatio === undefined) return { passed: true };\n        const aaaThreshold = condition.minContrast ?? 7;\n        if (contrastRatio < aaaThreshold) {\n          return {\n            passed: false,\n            message: `WCAG AAA requires contrast ratio >= ${aaaThreshold}:1, got ${contrastRatio.toFixed(2)}:1`,\n          };\n        }\n        return { passed: true };\n\n      case 'apca-body':\n        if (apcaValue === undefined) return { passed: true };\n        const bodyThreshold = condition.minContrast ?? 60;\n        if (Math.abs(apcaValue) < bodyThreshold) {\n          return {\n            passed: false,\n            message: `APCA body text requires Lc >= ${bodyThreshold}, got Lc ${Math.abs(apcaValue).toFixed(1)}`,\n          };\n        }\n        return { passed: true };\n\n      case 'apca-ui':\n        if (apcaValue === undefined) return { passed: true };\n        const uiThreshold = condition.minContrast ?? 30;\n        if (Math.abs(apcaValue) < uiThreshold) {\n          return {\n            passed: false,\n            message: `APCA UI elements require Lc >= ${uiThreshold}, got Lc ${Math.abs(apcaValue).toFixed(1)}`,\n          };\n        }\n        return { passed: true };\n\n      default:\n        return { passed: true };\n    }\n  }\n\n  /**\n   * Evaluates color conditions.\n   */\n  private evaluateColorCondition(\n    condition: ColorCondition,\n    input: GovernanceEvaluationInput\n  ): { passed: boolean; message?: string } {\n    const { color } = input;\n    if (!color) return { passed: true }; // Skip if no color data\n\n    switch (condition.check) {\n      case 'saturation': {\n        const threshold = condition.threshold ?? 20;\n        const chroma = color.oklch.c * 100;\n        if (chroma < threshold) {\n          return {\n            passed: false,\n            message: `Color saturation (${chroma.toFixed(1)}) is below minimum (${threshold})`,\n          };\n        }\n        return { passed: true };\n      }\n\n      case 'lightness': {\n        const threshold = condition.threshold ?? 50;\n        const tolerance = condition.tolerance ?? 30;\n        const lightness = color.oklch.l * 100;\n        if (Math.abs(lightness - threshold) > tolerance) {\n          return {\n            passed: false,\n            message: `Color lightness (${lightness.toFixed(1)}) is outside acceptable range (${threshold} ± ${tolerance})`,\n          };\n        }\n        return { passed: true };\n      }\n\n      case 'brand-alignment':\n      case 'harmony':\n        // These would require brand color comparison - return passed for now\n        return { passed: true };\n\n      default:\n        return { passed: true };\n    }\n  }\n\n  /**\n   * Evaluates token conditions.\n   */\n  private evaluateTokenCondition(\n    condition: TokenCondition,\n    input: GovernanceEvaluationInput\n  ): { passed: boolean; message?: string } {\n    const { tokens: _tokens, tokenNames } = input;\n\n    switch (condition.check) {\n      case 'naming-convention': {\n        if (!condition.pattern || !tokenNames) return { passed: true };\n        const regex = new RegExp(condition.pattern);\n        const invalidNames = tokenNames.filter(name => !regex.test(name));\n        if (invalidNames.length > 0) {\n          return {\n            passed: false,\n            message: `Invalid token names: ${invalidNames.slice(0, 3).join(', ')}${invalidNames.length > 3 ? '...' : ''}`,\n          };\n        }\n        return { passed: true };\n      }\n\n      case 'completeness': {\n        if (!condition.requiredTokens || !tokenNames) return { passed: true };\n        const missing = condition.requiredTokens.filter(t => !tokenNames.includes(t));\n        if (missing.length > 0) {\n          return {\n            passed: false,\n            message: `Missing required tokens: ${missing.join(', ')}`,\n          };\n        }\n        return { passed: true };\n      }\n\n      case 'hierarchy':\n      case 'consistency':\n        // Complex checks - return passed for now\n        return { passed: true };\n\n      default:\n        return { passed: true };\n    }\n  }\n\n  /**\n   * Evaluates theme conditions.\n   */\n  private evaluateThemeCondition(\n    condition: ThemeCondition,\n    input: GovernanceEvaluationInput\n  ): { passed: boolean; message?: string } {\n    const { themeHasLightMode, themeHasDarkMode } = input;\n\n    switch (condition.check) {\n      case 'mode-coverage': {\n        const modes = condition.modes ?? ['light', 'dark'];\n        const missingModes: string[] = [];\n\n        if (modes.includes('light') && !themeHasLightMode) {\n          missingModes.push('light');\n        }\n        if (modes.includes('dark') && !themeHasDarkMode) {\n          missingModes.push('dark');\n        }\n\n        if (missingModes.length > 0) {\n          return {\n            passed: false,\n            message: `Theme is missing required modes: ${missingModes.join(', ')}`,\n          };\n        }\n        return { passed: true };\n      }\n\n      case 'semantic-mapping':\n      case 'scale-consistency':\n        // Complex checks - return passed for now\n        return { passed: true };\n\n      default:\n        return { passed: true };\n    }\n  }\n\n  /**\n   * Evaluates custom conditions.\n   */\n  private evaluateCustomCondition(\n    evaluatorName: string,\n    params: Record<string, unknown> | undefined,\n    input: GovernanceEvaluationInput\n  ): { passed: boolean; message?: string } {\n    const evaluator = this.customEvaluators.get(evaluatorName);\n    if (!evaluator) {\n      return { passed: true }; // Skip unknown evaluators\n    }\n    return evaluator(input, params);\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // AGGREGATION\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Aggregates individual policy results into overall result.\n   */\n  private aggregateResults(\n    results: Array<{ policy: EnterprisePolicy; result: PolicyEvaluationResult }>,\n    evaluatedAt: Date\n  ): AggregatedEvaluationResult {\n    const allViolations: PolicyViolationDetail[] = [];\n    const allWarnings: PolicyViolationDetail[] = [];\n    const criticalViolations: PolicyViolationDetail[] = [];\n    const byCategory = new Map<string, PolicyEvaluationResult>();\n\n    let totalWeight = 0;\n    let weightedScore = 0;\n    let passedCount = 0;\n    let failedCount = 0;\n    let hasBlockingViolation = false;\n\n    for (const { policy, result } of results) {\n      allViolations.push(...result.violations);\n      allWarnings.push(...result.warnings);\n\n      if (result.passed) {\n        passedCount++;\n      } else {\n        failedCount++;\n\n        if (policy.isBlocking()) {\n          hasBlockingViolation = true;\n          criticalViolations.push(...result.violations);\n        }\n      }\n\n      const weight = policy.getWeight();\n      totalWeight += weight;\n      weightedScore += result.score * weight;\n\n      // Group by category\n      const existing = byCategory.get(policy.category);\n      if (!existing || result.score < existing.score) {\n        byCategory.set(policy.category, result);\n      }\n    }\n\n    const overallScore = totalWeight > 0 ? weightedScore / totalWeight : 100;\n\n    return Object.freeze({\n      overallPassed: !hasBlockingViolation && allViolations.length === 0,\n      overallScore,\n      totalPolicies: results.length,\n      passedPolicies: passedCount,\n      failedPolicies: failedCount,\n      criticalViolations: Object.freeze(criticalViolations),\n      allViolations: Object.freeze(allViolations),\n      allWarnings: Object.freeze(allWarnings),\n      byCategory,\n      evaluatedAt,\n      blockingViolations: hasBlockingViolation,\n    });\n  }\n}\n\n// ============================================================================\n// SINGLETON INSTANCE\n// ============================================================================\n\n/**\n * Default evaluator instance.\n */\nexport const governanceEvaluator = new GovernanceEvaluator();\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport default GovernanceEvaluator;\n","/**\n * @fileoverview Governance Domain Module\n *\n * Enterprise governance domain layer for enforcing design policies\n * across all products and teams.\n *\n * @module momoto-ui/domain/governance\n * @version 1.0.0\n */\n\n// ============================================================================\n// VALUE OBJECTS\n// ============================================================================\n\nexport {\n  EnterprisePolicy,\n  PolicySet,\n  type EnterprisePolicyConfig,\n  type PolicyRule,\n  type PolicyCondition,\n  type AccessibilityCondition,\n  type ColorCondition,\n  type TokenCondition,\n  type ThemeCondition,\n  type CustomCondition,\n  type PolicyContext,\n  type PolicySeverity,\n  type PolicyScope,\n  type PolicyViolationDetail,\n  type PolicyEvaluationResult,\n} from './value-objects/EnterprisePolicy';\n\n// ============================================================================\n// SERVICES\n// ============================================================================\n\nexport {\n  GovernanceEvaluator,\n  governanceEvaluator,\n  type GovernanceEvaluationInput,\n  type AggregatedEvaluationResult,\n  type CustomEvaluatorFn,\n} from './services/GovernanceEvaluator';\n\n// ============================================================================\n// PREBUILT POLICIES\n// ============================================================================\n\nimport {\n  EnterprisePolicy,\n  PolicySet,\n  type EnterprisePolicyConfig,\n} from './value-objects/EnterprisePolicy';\n\n/**\n * Pre-built enterprise policy configurations.\n */\nexport const ENTERPRISE_POLICIES: Record<string, EnterprisePolicyConfig> = {\n  /**\n   * WCAG AA Accessibility Policy\n   */\n  'accessibility-wcag-aa': {\n    id: 'accessibility-wcag-aa',\n    name: 'WCAG AA Compliance',\n    description: 'Ensures all text meets WCAG 2.1 AA contrast requirements (4.5:1 for normal text)',\n    category: 'accessibility',\n    scope: 'accessibility',\n    enforcement: 'required',\n    severity: 'critical',\n    version: '1.0.0',\n    rules: [\n      {\n        id: 'wcag-aa-contrast',\n        name: 'WCAG AA Contrast Ratio',\n        condition: { type: 'accessibility', standard: 'wcag-aa', minContrast: 4.5 },\n        message: 'Text contrast ratio must be at least 4.5:1 for WCAG AA compliance',\n        suggestion: 'Increase the lightness difference between text and background colors',\n        autoFixable: true,\n      },\n    ],\n  },\n\n  /**\n   * APCA Body Text Policy\n   */\n  'accessibility-apca-body': {\n    id: 'accessibility-apca-body',\n    name: 'APCA Body Text Compliance',\n    description: 'Ensures body text meets APCA perceptual contrast standards (Lc 60+)',\n    category: 'accessibility',\n    scope: 'accessibility',\n    enforcement: 'recommended',\n    severity: 'high',\n    version: '1.0.0',\n    rules: [\n      {\n        id: 'apca-body-contrast',\n        name: 'APCA Body Text Contrast',\n        condition: { type: 'accessibility', standard: 'apca-body', minContrast: 60 },\n        message: 'Body text should have APCA contrast of at least Lc 60',\n        suggestion: 'Adjust text or background color for better perceptual contrast',\n        autoFixable: true,\n      },\n    ],\n  },\n\n  /**\n   * Theme Coverage Policy\n   */\n  'theme-mode-coverage': {\n    id: 'theme-mode-coverage',\n    name: 'Light/Dark Mode Coverage',\n    description: 'Ensures themes support both light and dark modes',\n    category: 'custom',\n    scope: 'theme',\n    enforcement: 'required',\n    severity: 'high',\n    version: '1.0.0',\n    rules: [\n      {\n        id: 'dual-mode',\n        name: 'Dual Mode Support',\n        condition: { type: 'theme', check: 'mode-coverage', modes: ['light', 'dark'] },\n        message: 'Theme must support both light and dark modes',\n        suggestion: 'Generate theme tokens for both light and dark modes',\n        autoFixable: false,\n      },\n    ],\n  },\n\n  /**\n   * Token Naming Convention Policy\n   */\n  'token-naming-convention': {\n    id: 'token-naming-convention',\n    name: 'Token Naming Convention',\n    description: 'Enforces consistent token naming patterns (kebab-case)',\n    category: 'custom',\n    scope: 'token',\n    enforcement: 'required',\n    severity: 'medium',\n    version: '1.0.0',\n    rules: [\n      {\n        id: 'kebab-case',\n        name: 'Kebab Case Naming',\n        condition: {\n          type: 'token',\n          check: 'naming-convention',\n          pattern: '^[a-z][a-z0-9]*(-[a-z0-9]+)*$',\n        },\n        message: 'Token names must use kebab-case format',\n        suggestion: 'Rename tokens to use lowercase with hyphens (e.g., \"primary-color\")',\n        autoFixable: true,\n      },\n    ],\n  },\n\n  /**\n   * Brand Color Saturation Policy\n   */\n  'color-minimum-saturation': {\n    id: 'color-minimum-saturation',\n    name: 'Minimum Color Saturation',\n    description: 'Ensures brand colors have sufficient saturation for visual impact',\n    category: 'brand-consistency',\n    scope: 'component',\n    enforcement: 'recommended',\n    severity: 'low',\n    version: '1.0.0',\n    rules: [\n      {\n        id: 'min-saturation',\n        name: 'Minimum Saturation Check',\n        condition: { type: 'color', check: 'saturation', threshold: 15 },\n        message: 'Brand colors should have at least 15% saturation',\n        suggestion: 'Increase the chroma/saturation of the color',\n        autoFixable: true,\n      },\n    ],\n  },\n};\n\n/**\n * Creates the default enterprise policy set.\n */\nexport function createDefaultPolicySet(): PolicySet {\n  const policies: EnterprisePolicy[] = [];\n\n  for (const config of Object.values(ENTERPRISE_POLICIES)) {\n    const result = EnterprisePolicy.create(config);\n    if (result.success) {\n      policies.push(result.value);\n    }\n  }\n\n  return new PolicySet(policies);\n}\n\n/**\n * Creates a strict enterprise policy set (all required, critical).\n */\nexport function createStrictPolicySet(): PolicySet {\n  const policies: EnterprisePolicy[] = [];\n\n  for (const config of Object.values(ENTERPRISE_POLICIES)) {\n    const strictConfig: EnterprisePolicyConfig = {\n      ...config,\n      enforcement: 'required',\n      severity: config.severity === 'info' ? 'low' : config.severity,\n    };\n\n    const result = EnterprisePolicy.create(strictConfig);\n    if (result.success) {\n      policies.push(result.value);\n    }\n  }\n\n  return new PolicySet(policies);\n}\n\n/**\n * Creates a lenient enterprise policy set (all optional).\n */\nexport function createLenientPolicySet(): PolicySet {\n  const policies: EnterprisePolicy[] = [];\n\n  for (const config of Object.values(ENTERPRISE_POLICIES)) {\n    const lenientConfig: EnterprisePolicyConfig = {\n      ...config,\n      enforcement: 'optional',\n    };\n\n    const result = EnterprisePolicy.create(lenientConfig);\n    if (result.success) {\n      policies.push(result.value);\n    }\n  }\n\n  return new PolicySet(policies);\n}\n"]}