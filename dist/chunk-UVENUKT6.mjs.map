{"version":3,"sources":["../infrastructure/exporters/W3CTokenExporter.ts"],"names":[],"mappings":"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","file":"chunk-UVENUKT6.mjs","sourcesContent":["/**\n * @fileoverview W3C Design Tokens Exporter\n *\n * Implementación del ExporterPort para exportar tokens en formato W3C DTCG.\n * Cumple con la especificación del Design Tokens Community Group.\n *\n * @see https://design-tokens.github.io/community-group/format/\n *\n * @module momoto-ui/infrastructure/exporters/W3CTokenExporter\n * @version 1.0.0\n */\n\nimport type { Result } from '../../domain/types';\nimport { success, failure } from '../../domain/types';\nimport type { TokenCollection, DesignToken } from '../../domain/tokens';\nimport type {\n  ExporterPort,\n  ExportOptions,\n  ExportResult,\n  ExportDestination,\n  ExportToDestinationResult,\n  ExportFormat,\n  BaseExportOptions,\n} from '../../application/ports/outbound/ExporterPort';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Token W3C DTCG format.\n */\ninterface W3CToken {\n  $value: unknown;\n  $type?: string;\n  $description?: string;\n  $extensions?: Record<string, unknown>;\n}\n\n/**\n * Grupo de tokens W3C.\n */\ninterface W3CTokenGroup {\n  [key: string]: W3CToken | W3CTokenGroup;\n}\n\n/**\n * Opciones específicas del exportador W3C.\n */\nexport interface W3CExporterOptions {\n  /** Si incluir $type en todos los tokens */\n  readonly includeType?: boolean;\n  /** Si incluir $description cuando esté disponible */\n  readonly includeDescription?: boolean;\n  /** Si incluir $extensions con metadatos adicionales */\n  readonly includeExtensions?: boolean;\n  /** Namespace para extensions propias */\n  readonly extensionNamespace?: string;\n  /** Si agrupar tokens por path */\n  readonly groupByPath?: boolean;\n  /** Si incluir metadatos del archivo */\n  readonly includeFileMetadata?: boolean;\n}\n\n/**\n * Opciones por defecto.\n */\nconst DEFAULT_W3C_OPTIONS: Required<W3CExporterOptions> = {\n  includeType: true,\n  includeDescription: true,\n  includeExtensions: false,\n  extensionNamespace: 'zuclubit',\n  groupByPath: true,\n  includeFileMetadata: true,\n};\n\n/**\n * Formatos soportados por este exporter.\n */\nconst SUPPORTED_FORMATS: readonly ExportFormat[] = [\n  'w3c',\n  'json',\n  'css',\n  'scss',\n  'typescript',\n];\n\n// ============================================================================\n// EXPORTER\n// ============================================================================\n\n/**\n * W3CTokenExporter - Exportador de tokens en formato W3C DTCG.\n *\n * Genera archivos JSON compatibles con la especificación del\n * Design Tokens Community Group, listos para ser consumidos por\n * herramientas como Style Dictionary, Figma Tokens, o cualquier\n * otra herramienta compatible.\n *\n * @example\n * ```typescript\n * const exporter = new W3CTokenExporter({\n *   includeType: true,\n *   includeDescription: true,\n *   groupByPath: true,\n * });\n *\n * const result = await exporter.export(tokenCollection, {\n *   format: 'w3c',\n * });\n *\n * if (result.success) {\n *   console.log(result.value.content);\n * }\n * ```\n */\nexport class W3CTokenExporter implements ExporterPort {\n  // ─────────────────────────────────────────────────────────────────────────\n  // PROPERTIES\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private readonly options: Required<W3CExporterOptions>;\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // CONSTRUCTOR\n  // ─────────────────────────────────────────────────────────────────────────\n\n  constructor(options: W3CExporterOptions = {}) {\n    this.options = { ...DEFAULT_W3C_OPTIONS, ...options };\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // EXPORT METHODS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  async export(\n    collection: TokenCollection,\n    options: ExportOptions\n  ): Promise<Result<ExportResult, Error>> {\n    try {\n      const tokens = [...collection.getAll()]; // Convert to mutable array\n      return this.exportTokens(tokens, options);\n    } catch (error) {\n      return failure(\n        error instanceof Error ? error : new Error('Export failed')\n      );\n    }\n  }\n\n  async exportTokens(\n    tokens: DesignToken[],\n    options: ExportOptions\n  ): Promise<Result<ExportResult, Error>> {\n    try {\n      const format = options.format ?? 'w3c';\n\n      // Route to appropriate format\n      switch (format) {\n        case 'w3c':\n        case 'json':\n          return this.exportW3C(tokens, options);\n        case 'css':\n          return this.exportCSS(tokens, options);\n        case 'scss':\n          return this.exportSCSS(tokens, options);\n        case 'typescript':\n          return this.exportTypeScript(tokens, options);\n        default:\n          return failure(new Error(`Unsupported format: ${format}`));\n      }\n    } catch (error) {\n      return failure(\n        error instanceof Error ? error : new Error('Export failed')\n      );\n    }\n  }\n\n  async exportTo(\n    collection: TokenCollection,\n    options: ExportOptions,\n    destination: ExportDestination\n  ): Promise<Result<ExportToDestinationResult, Error>> {\n    const exportResult = await this.export(collection, options);\n    if (!exportResult.success) {\n      return failure(exportResult.error);\n    }\n\n    // Determine location from destination\n    let location: string | undefined;\n    if (destination.type === 'file') {\n      location = destination.path;\n    } else if (destination.type === 'api') {\n      location = destination.url;\n    }\n\n    // Note: En un ambiente real, aquí se escribiría al filesystem/API\n    // Por ahora, solo retornamos el resultado con metadata adicional\n    return success({\n      ...exportResult.value,\n      destination,\n      location,\n    });\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // FORMAT SUPPORT\n  // ─────────────────────────────────────────────────────────────────────────\n\n  getSupportedFormats(): ExportFormat[] {\n    return [...SUPPORTED_FORMATS];\n  }\n\n  supportsFormat(format: string): format is ExportFormat {\n    return SUPPORTED_FORMATS.includes(format as ExportFormat);\n  }\n\n  getDefaultOptions(format: ExportFormat): BaseExportOptions {\n    const baseDefaults: BaseExportOptions = {\n      prefix: '',\n      suffix: '',\n      includeComments: true,\n      minify: false,\n      nameTransform: 'kebab-case',\n    };\n\n    // Format-specific defaults\n    switch (format) {\n      case 'css':\n        return { ...baseDefaults };\n      case 'scss':\n        return { ...baseDefaults };\n      case 'typescript':\n        return { ...baseDefaults, nameTransform: 'camelCase' };\n      default:\n        return baseDefaults;\n    }\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // VALIDATION\n  // ─────────────────────────────────────────────────────────────────────────\n\n  validateOptions(options: ExportOptions): Result<void, Error> {\n    if (!options.format) {\n      return failure(new Error('Export format is required'));\n    }\n\n    if (!this.supportsFormat(options.format)) {\n      return failure(new Error(`Unsupported format: ${options.format}`));\n    }\n\n    return success(undefined);\n  }\n\n  async validateDestination(destination: ExportDestination): Promise<Result<void, Error>> {\n    switch (destination.type) {\n      case 'file':\n        if (!destination.path) {\n          return failure(new Error('File path is required'));\n        }\n        break;\n      case 'api':\n        if (!destination.url) {\n          return failure(new Error('API URL is required'));\n        }\n        try {\n          new URL(destination.url);\n        } catch {\n          return failure(new Error('Invalid API URL'));\n        }\n        break;\n      case 'figma':\n        if (!destination.fileKey) {\n          return failure(new Error('Figma file key is required'));\n        }\n        break;\n    }\n\n    return success(undefined);\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // PREVIEW\n  // ─────────────────────────────────────────────────────────────────────────\n\n  async preview(\n    collection: TokenCollection,\n    options: ExportOptions,\n    maxLines = 50\n  ): Promise<Result<{ preview: string; truncated: boolean; totalLines: number }, Error>> {\n    const exportResult = await this.export(collection, options);\n    if (!exportResult.success) {\n      return failure(exportResult.error);\n    }\n\n    const lines = exportResult.value.content.split('\\n');\n    const totalLines = lines.length;\n    const truncated = totalLines > maxLines;\n    const preview = truncated\n      ? lines.slice(0, maxLines).join('\\n') + '\\n... (truncated)'\n      : exportResult.value.content;\n\n    return success({ preview, truncated, totalLines });\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // BATCH OPERATIONS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  async exportMultiple(\n    collection: TokenCollection,\n    formats: ExportOptions[]\n  ): Promise<Result<Map<ExportFormat, ExportResult>, Error>> {\n    const results = new Map<ExportFormat, ExportResult>();\n    const errors: string[] = [];\n\n    for (const options of formats) {\n      const result = await this.export(collection, options);\n      if (result.success) {\n        results.set(options.format, result.value);\n      } else {\n        errors.push(`${options.format}: ${result.error.message}`);\n      }\n    }\n\n    if (errors.length > 0 && results.size === 0) {\n      return failure(new Error(`All exports failed: ${errors.join('; ')}`));\n    }\n\n    return success(results);\n  }\n\n  async exportToMultiple(\n    collection: TokenCollection,\n    destinations: Array<{ options: ExportOptions; destination: ExportDestination }>\n  ): Promise<Result<ExportToDestinationResult[], Error>> {\n    const results: ExportToDestinationResult[] = [];\n    const errors: string[] = [];\n\n    for (const { options, destination } of destinations) {\n      const result = await this.exportTo(collection, options, destination);\n      if (result.success) {\n        results.push(result.value);\n      } else {\n        errors.push(`${options.format} to ${destination.type}: ${result.error.message}`);\n      }\n    }\n\n    if (errors.length > 0 && results.length === 0) {\n      return failure(new Error(`All exports failed: ${errors.join('; ')}`));\n    }\n\n    return success(results);\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // PRIVATE EXPORT METHODS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private exportW3C(\n    tokens: DesignToken[],\n    options: ExportOptions\n  ): Result<ExportResult, Error> {\n    const output: W3CTokenGroup = {};\n    const warnings: string[] = [];\n\n    // Add file metadata if enabled\n    if (this.options.includeFileMetadata) {\n      (output as Record<string, unknown>)['$schema'] =\n        'https://design-tokens.github.io/community-group/format/';\n      (output as Record<string, unknown>)['$metadata'] = {\n        name: 'tokens',\n        version: '1.0.0',\n        generatedAt: new Date().toISOString(),\n        generator: '@zuclubit/momoto-ui',\n      };\n    }\n\n    // Process tokens\n    for (const token of tokens) {\n      const w3cToken = this.tokenToW3C(token);\n      const pathParts = this.getTokenPath(token);\n\n      if (this.options.groupByPath) {\n        this.setNestedValue(output, pathParts, w3cToken);\n      } else {\n        output[pathParts.join('.')] = w3cToken;\n      }\n    }\n\n    const content = JSON.stringify(output, null, options.minify ? 0 : 2);\n\n    return success({\n      format: 'w3c',\n      content,\n      tokenCount: tokens.length,\n      sizeBytes: new TextEncoder().encode(content).length,\n      exportedAt: new Date(),\n      warnings,\n      metadata: {\n        generatedAt: new Date(),\n        version: '1.0.0',\n      },\n    });\n  }\n\n  private exportCSS(\n    tokens: DesignToken[],\n    options: ExportOptions\n  ): Result<ExportResult, Error> {\n    const prefix = options.prefix ?? '';\n    const warnings: string[] = [];\n    const lines: string[] = [\n      '/* Generated by @zuclubit/momoto-ui */',\n      '/* W3C Design Tokens to CSS Custom Properties */',\n      '',\n      ':root {',\n    ];\n\n    for (const token of tokens) {\n      const pathParts = this.getTokenPath(token);\n      const varName = `--${prefix}${pathParts.join('-')}`;\n      const value = this.getTokenValue(token);\n      lines.push(`  ${varName}: ${value};`);\n    }\n\n    lines.push('}');\n\n    const content = lines.join('\\n');\n\n    return success({\n      format: 'css',\n      content,\n      tokenCount: tokens.length,\n      sizeBytes: new TextEncoder().encode(content).length,\n      exportedAt: new Date(),\n      warnings,\n    });\n  }\n\n  private exportSCSS(\n    tokens: DesignToken[],\n    options: ExportOptions\n  ): Result<ExportResult, Error> {\n    const prefix = options.prefix ?? '';\n    const warnings: string[] = [];\n    const lines: string[] = [\n      '// Generated by @zuclubit/momoto-ui',\n      '// W3C Design Tokens to SCSS Variables',\n      '',\n    ];\n\n    for (const token of tokens) {\n      const pathParts = this.getTokenPath(token);\n      const varName = `$${prefix}${pathParts.join('-')}`;\n      const value = this.getTokenValue(token);\n      lines.push(`${varName}: ${value};`);\n    }\n\n    // Add CSS custom properties map\n    lines.push('');\n    lines.push('// CSS Custom Properties');\n    lines.push(':root {');\n\n    for (const token of tokens) {\n      const pathParts = this.getTokenPath(token);\n      const varName = `--${prefix}${pathParts.join('-')}`;\n      const scssVar = `$${prefix}${pathParts.join('-')}`;\n      lines.push(`  ${varName}: #{${scssVar}};`);\n    }\n\n    lines.push('}');\n\n    const content = lines.join('\\n');\n\n    return success({\n      format: 'scss',\n      content,\n      tokenCount: tokens.length,\n      sizeBytes: new TextEncoder().encode(content).length,\n      exportedAt: new Date(),\n      warnings,\n    });\n  }\n\n  private exportTypeScript(\n    tokens: DesignToken[],\n    _options: ExportOptions\n  ): Result<ExportResult, Error> {\n    const warnings: string[] = [];\n    const lines: string[] = [\n      '/**',\n      ' * Generated by @zuclubit/momoto-ui',\n      ' * W3C Design Tokens to TypeScript',\n      ' */',\n      '',\n      'export const tokens = {',\n    ];\n\n    // Build nested object\n    const obj: Record<string, unknown> = {};\n    for (const token of tokens) {\n      const pathParts = this.getTokenPath(token);\n      this.setNestedValue(obj, pathParts, this.getTokenValue(token));\n    }\n\n    // Convert to TypeScript\n    const jsonStr = JSON.stringify(obj, null, 2);\n    // Replace quotes with proper TS syntax\n    const tsContent = jsonStr.replace(/\"([^\"]+)\":/g, '$1:');\n    lines.push(tsContent.slice(1, -1)); // Remove outer braces\n    lines.push('} as const;');\n    lines.push('');\n    lines.push('export type TokenPath = keyof typeof tokens;');\n    lines.push('export default tokens;');\n\n    const content = lines.join('\\n');\n\n    return success({\n      format: 'typescript',\n      content,\n      tokenCount: tokens.length,\n      sizeBytes: new TextEncoder().encode(content).length,\n      exportedAt: new Date(),\n      warnings,\n    });\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // HELPERS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Gets the token path as an array of strings.\n   * DesignToken.path is always string[], so this is a simple accessor.\n   */\n  private getTokenPath(token: DesignToken): string[] {\n    return token.path.length > 0 ? token.path : ['unknown'];\n  }\n\n  private tokenToW3C(token: DesignToken): W3CToken {\n    const tokenData = token as unknown as {\n      value: unknown;\n      type?: string;\n      description?: string;\n      metadata?: Record<string, unknown>;\n    };\n\n    const w3cToken: W3CToken = {\n      $value: tokenData.value,\n    };\n\n    if (this.options.includeType && tokenData.type) {\n      w3cToken.$type = this.mapToW3CType(tokenData.type);\n    }\n\n    if (this.options.includeDescription && tokenData.description) {\n      w3cToken.$description = tokenData.description;\n    }\n\n    if (this.options.includeExtensions && tokenData.metadata) {\n      w3cToken.$extensions = {\n        [this.options.extensionNamespace]: tokenData.metadata,\n      };\n    }\n\n    return w3cToken;\n  }\n\n  private mapToW3CType(type: string): string {\n    const typeMap: Record<string, string> = {\n      color: 'color',\n      dimension: 'dimension',\n      fontFamily: 'fontFamily',\n      fontWeight: 'fontWeight',\n      duration: 'duration',\n      cubicBezier: 'cubicBezier',\n      number: 'number',\n      string: 'string',\n      shadow: 'shadow',\n      strokeStyle: 'strokeStyle',\n      border: 'border',\n      transition: 'transition',\n      gradient: 'gradient',\n      typography: 'typography',\n    };\n\n    return typeMap[type] ?? type;\n  }\n\n  private getTokenValue(token: DesignToken): string {\n    const tokenData = token as unknown as { value: unknown };\n    const value = tokenData.value;\n\n    if (typeof value === 'string') {\n      return value;\n    }\n\n    if (typeof value === 'number') {\n      return String(value);\n    }\n\n    if (typeof value === 'object' && value !== null) {\n      return JSON.stringify(value);\n    }\n\n    return String(value);\n  }\n\n  private setNestedValue(\n    obj: Record<string, unknown>,\n    path: string[],\n    value: unknown\n  ): void {\n    let current = obj;\n\n    for (let i = 0; i < path.length - 1; i++) {\n      const key = path[i];\n      if (!(key in current)) {\n        current[key] = {};\n      }\n      current = current[key] as Record<string, unknown>;\n    }\n\n    current[path[path.length - 1]] = value;\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport default W3CTokenExporter;\n"]}