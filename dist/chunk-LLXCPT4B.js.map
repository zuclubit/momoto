{"version":3,"sources":["../application/use-cases/EnforceEnterpriseGovernance.ts","../application/ports/outbound/GovernanceAuditPort.ts"],"names":["__publicField","GovernanceEvaluator","createDefaultPolicySet","success","failure","PerceptualColor"],"mappings":"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","file":"chunk-LLXCPT4B.js","sourcesContent":["/**\n * @fileoverview EnforceEnterpriseGovernance Use Case\n *\n * Application layer orchestrator for enterprise design governance.\n * Coordinates policy evaluation across all design decisions and provides\n * a unified interface for governance enforcement.\n *\n * This is the \"golden path\" use case that teams should use for all\n * design decisions to ensure enterprise compliance.\n *\n * @module momoto-ui/application/use-cases/EnforceEnterpriseGovernance\n * @version 1.0.0\n */\n\nimport type { Result } from '../../domain/types';\nimport { success, failure } from '../../domain/types';\nimport {\n  GovernanceEvaluator,\n  PolicySet,\n  EnterprisePolicy,\n  createDefaultPolicySet,\n  type PolicyContext,\n  type PolicyScope,\n  type AggregatedEvaluationResult,\n  type GovernanceEvaluationInput,\n  type PolicyViolationDetail,\n  type CustomEvaluatorFn,\n} from '../../domain/governance';\nimport { PerceptualColor } from '../../domain/perceptual';\nimport type { TokenCollection } from '../../domain/tokens';\nimport type { GovernanceAuditPort } from '../../application/ports/outbound/GovernanceAuditPort';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Configuration for the governance orchestrator.\n */\nexport interface GovernanceConfig {\n  /** Policy set to use (default: createDefaultPolicySet()) */\n  readonly policySet?: PolicySet;\n  /** Whether to fail fast on blocking violations */\n  readonly failFast?: boolean;\n  /** Whether to auto-fix fixable violations */\n  readonly autoFix?: boolean;\n  /** Audit port for logging decisions */\n  readonly auditPort?: GovernanceAuditPort;\n  /** Custom evaluators to register */\n  readonly customEvaluators?: Record<string, CustomEvaluatorFn>;\n}\n\n/**\n * Input for governance enforcement.\n */\nexport interface GovernanceEnforcementInput {\n  /** What is being evaluated */\n  readonly subject: GovernanceSubject;\n  /** Context for evaluation */\n  readonly context?: Partial<PolicyContext>;\n  /** Optional override policies (adds to default set) */\n  readonly additionalPolicies?: EnterprisePolicy[];\n  /** Whether this is a validation-only check (no side effects) */\n  readonly validationOnly?: boolean;\n}\n\n/**\n * Subject of governance enforcement.\n */\nexport type GovernanceSubject =\n  | ColorSubject\n  | TokenSubject\n  | ThemeSubject\n  | ComponentSubject\n  | AccessibilitySubject;\n\nexport interface ColorSubject {\n  readonly type: 'color';\n  readonly color: PerceptualColor;\n  readonly purpose?: 'brand' | 'text' | 'background' | 'border';\n}\n\nexport interface TokenSubject {\n  readonly type: 'tokens';\n  readonly tokens: TokenCollection;\n}\n\nexport interface ThemeSubject {\n  readonly type: 'theme';\n  readonly hasLightMode: boolean;\n  readonly hasDarkMode: boolean;\n  readonly brandColor?: PerceptualColor;\n}\n\nexport interface ComponentSubject {\n  readonly type: 'component';\n  readonly componentName: string;\n  readonly tokens?: TokenCollection;\n  readonly brandColor?: PerceptualColor;\n}\n\nexport interface AccessibilitySubject {\n  readonly type: 'accessibility';\n  readonly foreground: PerceptualColor;\n  readonly background: PerceptualColor;\n  readonly contrastRatio: number;\n  readonly apcaValue: number;\n}\n\n/**\n * Output of governance enforcement.\n */\nexport interface GovernanceEnforcementOutput {\n  /** Whether all required policies passed */\n  readonly compliant: boolean;\n  /** Overall compliance score (0-100) */\n  readonly complianceScore: number;\n  /** Detailed evaluation result */\n  readonly evaluation: AggregatedEvaluationResult;\n  /** Human-readable summary */\n  readonly summary: GovernanceSummary;\n  /** Auto-fix results if enabled */\n  readonly fixes?: GovernanceFixes;\n  /** Audit ID for traceability */\n  readonly auditId?: string;\n}\n\n/**\n * Human-readable governance summary.\n */\nexport interface GovernanceSummary {\n  readonly status: 'pass' | 'fail' | 'warning';\n  readonly headline: string;\n  readonly details: string[];\n  readonly recommendations: string[];\n}\n\n/**\n * Auto-fix results.\n */\nexport interface GovernanceFixes {\n  readonly attempted: number;\n  readonly successful: number;\n  readonly failed: number;\n  readonly details: Array<{\n    readonly violation: PolicyViolationDetail;\n    readonly fixed: boolean;\n    readonly fixDescription?: string;\n  }>;\n}\n\n// ============================================================================\n// USE CASE\n// ============================================================================\n\n/**\n * EnforceEnterpriseGovernance - Application orchestrator for governance.\n *\n * This is the primary entry point for teams to ensure their design decisions\n * comply with enterprise policies. It provides:\n *\n * - Unified interface for all governance checks\n * - Automatic policy set management\n * - Human-readable feedback\n * - Optional auto-fixing\n * - Audit trail integration\n *\n * @example\n * ```typescript\n * const governance = new EnforceEnterpriseGovernance();\n *\n * // Check a color\n * const colorResult = await governance.execute({\n *   subject: {\n *     type: 'color',\n *     color: PerceptualColor.fromHex('#3B82F6'),\n *     purpose: 'brand',\n *   },\n * });\n *\n * if (!colorResult.value.compliant) {\n *   console.log(colorResult.value.summary.headline);\n *   console.log(colorResult.value.summary.recommendations);\n * }\n *\n * // Check accessibility\n * const a11yResult = await governance.execute({\n *   subject: {\n *     type: 'accessibility',\n *     foreground: PerceptualColor.fromHex('#000000'),\n *     background: PerceptualColor.fromHex('#FFFFFF'),\n *     contrastRatio: 21,\n *     apcaValue: 106,\n *   },\n * });\n * ```\n */\nexport class EnforceEnterpriseGovernance {\n  // ─────────────────────────────────────────────────────────────────────────\n  // DEPENDENCIES\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private readonly evaluator: GovernanceEvaluator;\n  private readonly policySet: PolicySet;\n  private readonly config: GovernanceConfig;\n  private readonly auditPort?: GovernanceAuditPort;\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // CONSTRUCTOR\n  // ─────────────────────────────────────────────────────────────────────────\n\n  constructor(config: GovernanceConfig = {}) {\n    this.config = config;\n    this.evaluator = new GovernanceEvaluator();\n    this.policySet = config.policySet ?? createDefaultPolicySet();\n    this.auditPort = config.auditPort;\n\n    // Register custom evaluators\n    if (config.customEvaluators) {\n      for (const [name, evaluator] of Object.entries(config.customEvaluators)) {\n        this.evaluator.registerCustomEvaluator(name, evaluator);\n      }\n    }\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // EXECUTION\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Executes governance enforcement on a subject.\n   */\n  async execute(input: GovernanceEnforcementInput): Promise<Result<GovernanceEnforcementOutput, Error>> {\n    try {\n      // 1. Build evaluation input\n      const evalInput = this.buildEvaluationInput(input);\n\n      // 2. Get applicable policy set\n      const policies = this.getApplicablePolicies(input);\n\n      // 3. Evaluate\n      const evaluation = this.evaluator.evaluate(policies, evalInput);\n\n      // 4. Generate summary\n      const summary = this.generateSummary(evaluation, input.subject);\n\n      // 5. Auto-fix if enabled\n      let fixes: GovernanceFixes | undefined;\n      if (this.config.autoFix && !input.validationOnly) {\n        fixes = this.attemptAutoFixes(evaluation);\n      }\n\n      // 6. Audit if port available\n      let auditId: string | undefined;\n      if (this.auditPort && !input.validationOnly) {\n        auditId = await this.auditPort.logGovernanceDecision({\n          subject: input.subject as unknown as { readonly type: string; readonly [key: string]: unknown },\n          evaluation,\n          summary,\n          fixes,\n          timestamp: new Date(),\n        });\n      }\n\n      // 7. Build output\n      const output: GovernanceEnforcementOutput = {\n        compliant: evaluation.overallPassed,\n        complianceScore: evaluation.overallScore,\n        evaluation,\n        summary,\n        fixes,\n        auditId,\n      };\n\n      return success(output);\n    } catch (error) {\n      return failure(\n        error instanceof Error ? error : new Error('Unknown error during governance enforcement')\n      );\n    }\n  }\n\n  /**\n   * Quick check - returns only pass/fail.\n   */\n  async quickCheck(input: GovernanceEnforcementInput): Promise<boolean> {\n    const result = await this.execute({ ...input, validationOnly: true });\n    return result.success && result.value.compliant;\n  }\n\n  /**\n   * Gets the current policy set.\n   */\n  getPolicySet(): PolicySet {\n    return this.policySet;\n  }\n\n  /**\n   * Creates a new instance with additional policies.\n   */\n  withPolicies(policies: EnterprisePolicy[]): EnforceEnterpriseGovernance {\n    let newSet = this.policySet;\n    for (const policy of policies) {\n      newSet = newSet.add(policy);\n    }\n    return new EnforceEnterpriseGovernance({\n      ...this.config,\n      policySet: newSet,\n    });\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // PRIVATE METHODS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Builds evaluation input from enforcement input.\n   */\n  private buildEvaluationInput(input: GovernanceEnforcementInput): GovernanceEvaluationInput {\n    const subject = input.subject;\n    const baseContext: PolicyContext = {\n      scope: this.inferScope(subject),\n      ...input.context,\n    };\n\n    switch (subject.type) {\n      case 'color':\n        return {\n          context: { ...baseContext, componentName: subject.purpose },\n          color: subject.color,\n        };\n\n      case 'tokens':\n        return {\n          context: baseContext,\n          tokens: subject.tokens,\n          tokenNames: subject.tokens.all().map(t => t.name),\n        };\n\n      case 'theme':\n        return {\n          context: baseContext,\n          color: subject.brandColor,\n          themeHasLightMode: subject.hasLightMode,\n          themeHasDarkMode: subject.hasDarkMode,\n        };\n\n      case 'component':\n        return {\n          context: { ...baseContext, componentName: subject.componentName },\n          color: subject.brandColor,\n          tokens: subject.tokens,\n          tokenNames: subject.tokens?.all().map(t => t.name),\n        };\n\n      case 'accessibility':\n        return {\n          context: baseContext,\n          color: subject.foreground,\n          contrastRatio: subject.contrastRatio,\n          apcaValue: subject.apcaValue,\n        };\n    }\n  }\n\n  /**\n   * Infers scope from subject type.\n   */\n  private inferScope(subject: GovernanceSubject): PolicyScope {\n    switch (subject.type) {\n      case 'color':\n        return 'component';\n      case 'tokens':\n        return 'token';\n      case 'theme':\n        return 'theme';\n      case 'component':\n        return 'component';\n      case 'accessibility':\n        return 'accessibility';\n    }\n  }\n\n  /**\n   * Gets applicable policy set with any additional policies.\n   */\n  private getApplicablePolicies(input: GovernanceEnforcementInput): PolicySet {\n    let policies = this.policySet;\n\n    if (input.additionalPolicies) {\n      for (const policy of input.additionalPolicies) {\n        policies = policies.add(policy);\n      }\n    }\n\n    return policies;\n  }\n\n  /**\n   * Generates human-readable summary.\n   */\n  private generateSummary(\n    evaluation: AggregatedEvaluationResult,\n    subject: GovernanceSubject\n  ): GovernanceSummary {\n    const status: 'pass' | 'fail' | 'warning' =\n      evaluation.overallPassed ? 'pass' :\n      evaluation.blockingViolations ? 'fail' : 'warning';\n\n    const subjectLabel = this.getSubjectLabel(subject);\n\n    let headline: string;\n    if (status === 'pass') {\n      headline = `${subjectLabel} passes all governance checks (score: ${evaluation.overallScore.toFixed(0)}%)`;\n    } else if (status === 'fail') {\n      headline = `${subjectLabel} has ${evaluation.criticalViolations.length} critical violations`;\n    } else {\n      headline = `${subjectLabel} has ${evaluation.allViolations.length} non-critical issues`;\n    }\n\n    const details: string[] = [];\n    details.push(`Evaluated ${evaluation.totalPolicies} policies`);\n    details.push(`Passed: ${evaluation.passedPolicies}, Failed: ${evaluation.failedPolicies}`);\n\n    if (evaluation.allViolations.length > 0) {\n      details.push('Violations:');\n      for (const v of evaluation.allViolations.slice(0, 5)) {\n        details.push(`  - [${v.severity}] ${v.message}`);\n      }\n      if (evaluation.allViolations.length > 5) {\n        details.push(`  ... and ${evaluation.allViolations.length - 5} more`);\n      }\n    }\n\n    if (evaluation.allWarnings.length > 0) {\n      details.push(`Warnings: ${evaluation.allWarnings.length}`);\n    }\n\n    const recommendations: string[] = [];\n    for (const v of evaluation.allViolations) {\n      if (v.suggestion && !recommendations.includes(v.suggestion)) {\n        recommendations.push(v.suggestion);\n      }\n    }\n\n    return {\n      status,\n      headline,\n      details,\n      recommendations: recommendations.slice(0, 5),\n    };\n  }\n\n  /**\n   * Gets a human-readable label for the subject.\n   */\n  private getSubjectLabel(subject: GovernanceSubject): string {\n    switch (subject.type) {\n      case 'color':\n        return `Color (${subject.purpose ?? 'general'})`;\n      case 'tokens':\n        return 'Token collection';\n      case 'theme':\n        return 'Theme configuration';\n      case 'component':\n        return `Component \"${subject.componentName}\"`;\n      case 'accessibility':\n        return 'Accessibility check';\n    }\n  }\n\n  /**\n   * Attempts to auto-fix fixable violations.\n   */\n  private attemptAutoFixes(evaluation: AggregatedEvaluationResult): GovernanceFixes {\n    const fixable = this.evaluator.getAutoFixableViolations(evaluation);\n    const details: GovernanceFixes['details'] = [];\n\n    let successful = 0;\n\n    for (const violation of fixable) {\n      // In a real implementation, this would invoke specific fix strategies\n      // For now, we just mark them as acknowledged\n      details.push({\n        violation,\n        fixed: false,\n        fixDescription: 'Auto-fix not yet implemented for this violation type',\n      });\n    }\n\n    return {\n      attempted: fixable.length,\n      successful,\n      failed: fixable.length - successful,\n      details,\n    };\n  }\n}\n\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n\n/**\n * Quick governance check for a color.\n */\nexport async function checkColorGovernance(\n  colorHex: string,\n  purpose?: 'brand' | 'text' | 'background' | 'border'\n): Promise<Result<GovernanceEnforcementOutput, Error>> {\n  const colorResult = PerceptualColor.tryFromHex(colorHex);\n  if (!colorResult.success) {\n    return failure(new Error(`Invalid color: ${colorResult.error.message}`));\n  }\n\n  const governance = new EnforceEnterpriseGovernance();\n  return governance.execute({\n    subject: {\n      type: 'color',\n      color: colorResult.value,\n      purpose,\n    },\n  });\n}\n\n/**\n * Quick governance check for accessibility.\n */\nexport async function checkAccessibilityGovernance(\n  foregroundHex: string,\n  backgroundHex: string\n): Promise<Result<GovernanceEnforcementOutput, Error>> {\n  const fgResult = PerceptualColor.tryFromHex(foregroundHex);\n  const bgResult = PerceptualColor.tryFromHex(backgroundHex);\n\n  if (!fgResult.success) {\n    return failure(new Error(`Invalid foreground color: ${fgResult.error.message}`));\n  }\n  if (!bgResult.success) {\n    return failure(new Error(`Invalid background color: ${bgResult.error.message}`));\n  }\n\n  const fg = fgResult.value;\n  const bg = bgResult.value;\n\n  // Calculate contrast (simplified)\n  const fgLum = fg.oklch.l;\n  const bgLum = bg.oklch.l;\n  const lighter = Math.max(fgLum, bgLum);\n  const darker = Math.min(fgLum, bgLum);\n  const contrastRatio = (lighter + 0.05) / (darker + 0.05);\n\n  // Simplified APCA calculation\n  const apcaValue = Math.abs(bgLum - fgLum) * 100;\n\n  const governance = new EnforceEnterpriseGovernance();\n  return governance.execute({\n    subject: {\n      type: 'accessibility',\n      foreground: fg,\n      background: bg,\n      contrastRatio,\n      apcaValue,\n    },\n  });\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport default EnforceEnterpriseGovernance;\n","/**\n * @fileoverview GovernanceAuditPort - Outbound Port\n *\n * Defines the outbound port (driven port) for governance auditing.\n * This is the contract that the governance system uses to log\n * decisions for traceability and compliance reporting.\n *\n * @module momoto-ui/application/ports/outbound/GovernanceAuditPort\n * @version 1.0.0\n */\n\nimport type {\n  AggregatedEvaluationResult,\n  PolicyViolationDetail,\n} from '../../../domain/governance';\n\n// ============================================================================\n// PORT INTERFACE\n// ============================================================================\n\n/**\n * GovernanceAuditPort - Outbound port for audit logging.\n *\n * Implementations:\n * - ConsoleAuditAdapter: Logs to console (development)\n * - FileAuditAdapter: Logs to file system\n * - APIAuditAdapter: Sends to remote audit service\n * - NoOpAuditAdapter: Disables auditing\n */\nexport interface GovernanceAuditPort {\n  /**\n   * Logs a governance decision.\n   * Returns an audit ID for traceability.\n   */\n  logGovernanceDecision(decision: GovernanceDecision): Promise<string>;\n\n  /**\n   * Logs a policy violation.\n   */\n  logViolation(violation: PolicyViolationDetail, context: AuditContext): Promise<void>;\n\n  /**\n   * Logs an auto-fix attempt.\n   */\n  logAutoFix(fix: AutoFixAttempt): Promise<void>;\n\n  /**\n   * Retrieves audit history.\n   */\n  getAuditHistory(filter: AuditFilter): Promise<AuditEntry[]>;\n\n  /**\n   * Generates an audit report.\n   */\n  generateAuditReport(options: AuditReportOptions): Promise<AuditReport>;\n}\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * A governance decision record.\n */\nexport interface GovernanceDecision {\n  readonly subject: {\n    readonly type: string;\n    readonly [key: string]: unknown;\n  };\n  readonly evaluation: AggregatedEvaluationResult;\n  readonly summary: {\n    readonly status: 'pass' | 'fail' | 'warning';\n    readonly headline: string;\n    readonly details: string[];\n    readonly recommendations: string[];\n  };\n  readonly fixes?: {\n    readonly attempted: number;\n    readonly successful: number;\n    readonly failed: number;\n    readonly details: Array<{\n      readonly violation: PolicyViolationDetail;\n      readonly fixed: boolean;\n      readonly fixDescription?: string;\n    }>;\n  };\n  readonly timestamp: Date;\n}\n\n/**\n * Context for audit logging.\n */\nexport interface AuditContext {\n  readonly sessionId?: string;\n  readonly userId?: string;\n  readonly applicationId?: string;\n  readonly componentPath?: string;\n  readonly timestamp: Date;\n  readonly metadata?: Record<string, unknown>;\n}\n\n/**\n * Auto-fix attempt record.\n */\nexport interface AutoFixAttempt {\n  readonly violation: PolicyViolationDetail;\n  readonly attempted: boolean;\n  readonly successful: boolean;\n  readonly fixDescription?: string;\n  readonly beforeValue?: unknown;\n  readonly afterValue?: unknown;\n  readonly timestamp: Date;\n}\n\n/**\n * Filter for retrieving audit history.\n */\nexport interface AuditFilter {\n  readonly startDate?: Date;\n  readonly endDate?: Date;\n  readonly status?: 'pass' | 'fail' | 'warning';\n  readonly policyId?: string;\n  readonly severity?: 'critical' | 'high' | 'medium' | 'low' | 'info';\n  readonly limit?: number;\n  readonly offset?: number;\n}\n\n/**\n * An audit entry.\n */\nexport interface AuditEntry {\n  readonly id: string;\n  readonly type: 'decision' | 'violation' | 'autofix';\n  readonly timestamp: Date;\n  readonly data: GovernanceDecision | PolicyViolationDetail | AutoFixAttempt;\n  readonly context?: AuditContext;\n}\n\n/**\n * Options for generating audit reports.\n */\nexport interface AuditReportOptions {\n  readonly startDate: Date;\n  readonly endDate: Date;\n  readonly groupBy?: 'policy' | 'severity' | 'day' | 'week';\n  readonly format?: 'json' | 'csv' | 'markdown';\n  readonly includeDetails?: boolean;\n}\n\n/**\n * An audit report.\n */\nexport interface AuditReport {\n  readonly generatedAt: Date;\n  readonly period: {\n    readonly start: Date;\n    readonly end: Date;\n  };\n  readonly summary: {\n    readonly totalDecisions: number;\n    readonly compliantDecisions: number;\n    readonly nonCompliantDecisions: number;\n    readonly complianceRate: number;\n    readonly totalViolations: number;\n    readonly autoFixAttempts: number;\n    readonly autoFixSuccesses: number;\n  };\n  readonly breakdowns: {\n    readonly byPolicy: Record<string, { pass: number; fail: number }>;\n    readonly bySeverity: Record<string, number>;\n    readonly byDate?: Record<string, number>;\n  };\n  readonly content: string;\n}\n\n// ============================================================================\n// NO-OP IMPLEMENTATION\n// ============================================================================\n\n/**\n * No-op audit adapter for when auditing is disabled.\n */\nexport class NoOpAuditAdapter implements GovernanceAuditPort {\n  async logGovernanceDecision(): Promise<string> {\n    return `audit-${Date.now()}`;\n  }\n\n  async logViolation(): Promise<void> {\n    // No-op\n  }\n\n  async logAutoFix(): Promise<void> {\n    // No-op\n  }\n\n  async getAuditHistory(): Promise<AuditEntry[]> {\n    return [];\n  }\n\n  async generateAuditReport(options: AuditReportOptions): Promise<AuditReport> {\n    return {\n      generatedAt: new Date(),\n      period: { start: options.startDate, end: options.endDate },\n      summary: {\n        totalDecisions: 0,\n        compliantDecisions: 0,\n        nonCompliantDecisions: 0,\n        complianceRate: 100,\n        totalViolations: 0,\n        autoFixAttempts: 0,\n        autoFixSuccesses: 0,\n      },\n      breakdowns: {\n        byPolicy: {},\n        bySeverity: {},\n      },\n      content: 'No audit data available',\n    };\n  }\n}\n\n/**\n * Console audit adapter for development.\n */\nexport class ConsoleAuditAdapter implements GovernanceAuditPort {\n  private entries: AuditEntry[] = [];\n\n  async logGovernanceDecision(decision: GovernanceDecision): Promise<string> {\n    const id = `audit-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n    console.group(`[Governance Audit] ${decision.summary.status.toUpperCase()}`);\n    console.log('ID:', id);\n    console.log('Subject:', decision.subject.type);\n    console.log('Score:', decision.evaluation.overallScore.toFixed(1) + '%');\n    console.log('Violations:', decision.evaluation.allViolations.length);\n    console.log('Headline:', decision.summary.headline);\n    console.groupEnd();\n\n    this.entries.push({\n      id,\n      type: 'decision',\n      timestamp: decision.timestamp,\n      data: decision,\n    });\n\n    return id;\n  }\n\n  async logViolation(violation: PolicyViolationDetail, context: AuditContext): Promise<void> {\n    console.warn(\n      `[Governance Violation] [${violation.severity}] ${violation.policyName}: ${violation.message}`\n    );\n\n    this.entries.push({\n      id: `violation-${Date.now()}`,\n      type: 'violation',\n      timestamp: context.timestamp,\n      data: violation,\n      context,\n    });\n  }\n\n  async logAutoFix(fix: AutoFixAttempt): Promise<void> {\n    console.info(\n      `[Governance AutoFix] ${fix.successful ? '✓' : '✗'} ${fix.fixDescription || 'No description'}`\n    );\n\n    this.entries.push({\n      id: `fix-${Date.now()}`,\n      type: 'autofix',\n      timestamp: fix.timestamp,\n      data: fix,\n    });\n  }\n\n  async getAuditHistory(filter: AuditFilter): Promise<AuditEntry[]> {\n    let filtered = [...this.entries];\n\n    if (filter.startDate) {\n      filtered = filtered.filter(e => e.timestamp >= filter.startDate!);\n    }\n    if (filter.endDate) {\n      filtered = filtered.filter(e => e.timestamp <= filter.endDate!);\n    }\n    if (filter.limit) {\n      filtered = filtered.slice(filter.offset || 0, (filter.offset || 0) + filter.limit);\n    }\n\n    return filtered;\n  }\n\n  async generateAuditReport(options: AuditReportOptions): Promise<AuditReport> {\n    const decisions = this.entries.filter(e => e.type === 'decision') as Array<\n      AuditEntry & { data: GovernanceDecision }\n    >;\n\n    const compliant = decisions.filter(d => d.data.evaluation.overallPassed).length;\n    const totalViolations = decisions.reduce(\n      (sum, d) => sum + d.data.evaluation.allViolations.length,\n      0\n    );\n\n    return {\n      generatedAt: new Date(),\n      period: { start: options.startDate, end: options.endDate },\n      summary: {\n        totalDecisions: decisions.length,\n        compliantDecisions: compliant,\n        nonCompliantDecisions: decisions.length - compliant,\n        complianceRate: decisions.length > 0 ? (compliant / decisions.length) * 100 : 100,\n        totalViolations,\n        autoFixAttempts: this.entries.filter(e => e.type === 'autofix').length,\n        autoFixSuccesses: this.entries.filter(\n          e => e.type === 'autofix' && (e.data as AutoFixAttempt).successful\n        ).length,\n      },\n      breakdowns: {\n        byPolicy: {},\n        bySeverity: {},\n      },\n      content: `Audit report for ${decisions.length} governance decisions`,\n    };\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport const noOpAuditAdapter = new NoOpAuditAdapter();\nexport const consoleAuditAdapter = new ConsoleAuditAdapter();\n\nexport type { GovernanceAuditPort as default };\n"]}