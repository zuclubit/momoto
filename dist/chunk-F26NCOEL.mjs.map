{"version":3,"sources":["../adapters/react/providers/GovernanceProvider.tsx"],"names":[],"mappings":"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","file":"chunk-F26NCOEL.mjs","sourcesContent":["/**\n * @fileoverview GovernanceProvider - React Adapter\n *\n * React provider and hooks for enterprise design governance.\n * This adapter makes governance enforcement accessible throughout\n * a React application via Context.\n *\n * @module momoto-ui/adapters/react/providers/GovernanceProvider\n * @version 1.0.0\n */\n\nimport {\n  createContext,\n  useContext,\n  useCallback,\n  useMemo,\n  useState,\n  useEffect,\n  type ReactNode,\n  type ReactElement,\n} from 'react';\n\nimport {\n  EnforceEnterpriseGovernance,\n  type GovernanceConfig,\n  type GovernanceEnforcementOutput,\n} from '../../../application/use-cases/EnforceEnterpriseGovernance';\nimport {\n  PolicySet,\n  EnterprisePolicy,\n  createDefaultPolicySet,\n  createStrictPolicySet,\n  createLenientPolicySet,\n  type PolicyScope,\n} from '../../../domain/governance';\nimport { PerceptualColor } from '../../../domain/perceptual';\nimport type { TokenCollection } from '../../../domain/tokens';\nimport {\n  ConsoleAuditAdapter,\n  NoOpAuditAdapter,\n} from '../../../application/ports/outbound/GovernanceAuditPort';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Governance mode determines policy strictness.\n */\nexport type GovernanceMode = 'strict' | 'default' | 'lenient' | 'disabled';\n\n/**\n * Configuration for the GovernanceProvider.\n */\nexport interface GovernanceProviderConfig {\n  /** Governance mode */\n  mode?: GovernanceMode;\n  /** Enable console logging */\n  enableAuditLog?: boolean;\n  /** Custom policies to add */\n  customPolicies?: EnterprisePolicy[];\n  /** Whether to fail-fast on blocking violations */\n  failFast?: boolean;\n  /** Auto-fix violations when possible */\n  autoFix?: boolean;\n}\n\n/**\n * Governance context value.\n */\nexport interface GovernanceContextValue {\n  // State\n  readonly mode: GovernanceMode;\n  readonly policySet: PolicySet;\n  readonly isEnabled: boolean;\n\n  // Actions\n  readonly setMode: (mode: GovernanceMode) => void;\n  readonly addPolicy: (policy: EnterprisePolicy) => void;\n  readonly removePolicy: (policyId: string) => void;\n  readonly enablePolicy: (policyId: string) => void;\n  readonly disablePolicy: (policyId: string) => void;\n\n  // Enforcement\n  readonly checkColor: (\n    colorHex: string,\n    purpose?: 'brand' | 'text' | 'background' | 'border'\n  ) => Promise<GovernanceEnforcementOutput | null>;\n\n  readonly checkAccessibility: (\n    foregroundHex: string,\n    backgroundHex: string\n  ) => Promise<GovernanceEnforcementOutput | null>;\n\n  readonly checkTokens: (\n    tokens: TokenCollection\n  ) => Promise<GovernanceEnforcementOutput | null>;\n\n  readonly checkTheme: (config: {\n    hasLightMode: boolean;\n    hasDarkMode: boolean;\n    brandColorHex?: string;\n  }) => Promise<GovernanceEnforcementOutput | null>;\n\n  readonly checkComponent: (\n    componentName: string,\n    tokens?: TokenCollection,\n    brandColorHex?: string\n  ) => Promise<GovernanceEnforcementOutput | null>;\n\n  // Quick checks\n  readonly isColorCompliant: (colorHex: string) => Promise<boolean>;\n  readonly isAccessibilityCompliant: (fg: string, bg: string) => Promise<boolean>;\n\n  // Utilities\n  readonly getPoliciesByScope: (scope: PolicyScope) => readonly EnterprisePolicy[];\n  readonly getComplianceScore: () => number;\n}\n\n// ============================================================================\n// CONTEXT\n// ============================================================================\n\nconst GovernanceContext = createContext<GovernanceContextValue | null>(null);\n\n// ============================================================================\n// PROVIDER\n// ============================================================================\n\n/**\n * GovernanceProvider - React provider for enterprise governance.\n *\n * Wrap your application with this provider to enable governance\n * checks throughout your component tree.\n *\n * @example\n * ```tsx\n * // Basic usage\n * <GovernanceProvider>\n *   <App />\n * </GovernanceProvider>\n *\n * // Strict mode with audit logging\n * <GovernanceProvider mode=\"strict\" enableAuditLog>\n *   <App />\n * </GovernanceProvider>\n *\n * // With custom policies\n * <GovernanceProvider customPolicies={[myCustomPolicy]}>\n *   <App />\n * </GovernanceProvider>\n * ```\n */\nexport function GovernanceProvider({\n  children,\n  mode: initialMode = 'default',\n  enableAuditLog = false,\n  customPolicies = [],\n  failFast = true,\n  autoFix = false,\n}: GovernanceProviderConfig & { children: ReactNode }): ReactElement {\n  // ─────────────────────────────────────────────────────────────────────────\n  // STATE\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const [mode, setMode] = useState<GovernanceMode>(initialMode);\n  const [policySet, setPolicySet] = useState<PolicySet>(() => {\n    const baseSet = getPolicySetForMode(initialMode);\n    let result = baseSet;\n    for (const policy of customPolicies) {\n      result = result.add(policy);\n    }\n    return result;\n  });\n  const [complianceHistory, setComplianceHistory] = useState<number[]>([]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // GOVERNANCE INSTANCE\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const governance = useMemo(() => {\n    if (mode === 'disabled') return null;\n\n    const config: GovernanceConfig = {\n      policySet,\n      failFast,\n      autoFix,\n      auditPort: enableAuditLog ? new ConsoleAuditAdapter() : new NoOpAuditAdapter(),\n    };\n\n    return new EnforceEnterpriseGovernance(config);\n  }, [mode, policySet, failFast, autoFix, enableAuditLog]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // MODE CHANGE HANDLER\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const handleSetMode = useCallback((newMode: GovernanceMode) => {\n    setMode(newMode);\n    if (newMode !== 'disabled') {\n      const baseSet = getPolicySetForMode(newMode);\n      let result = baseSet;\n      for (const policy of customPolicies) {\n        result = result.add(policy);\n      }\n      setPolicySet(result);\n    }\n  }, [customPolicies]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // POLICY MANAGEMENT\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const addPolicy = useCallback((policy: EnterprisePolicy) => {\n    setPolicySet(prev => prev.add(policy));\n  }, []);\n\n  const removePolicy = useCallback((policyId: string) => {\n    setPolicySet(prev => prev.remove(policyId));\n  }, []);\n\n  const enablePolicy = useCallback((policyId: string) => {\n    setPolicySet(prev => {\n      const policy = prev.get(policyId);\n      if (!policy) return prev;\n      return prev.remove(policyId).add(policy.withEnabled(true));\n    });\n  }, []);\n\n  const disablePolicy = useCallback((policyId: string) => {\n    setPolicySet(prev => {\n      const policy = prev.get(policyId);\n      if (!policy) return prev;\n      return prev.remove(policyId).add(policy.withEnabled(false));\n    });\n  }, []);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // ENFORCEMENT METHODS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const checkColor = useCallback(async (\n    colorHex: string,\n    purpose?: 'brand' | 'text' | 'background' | 'border'\n  ): Promise<GovernanceEnforcementOutput | null> => {\n    if (!governance) return null;\n\n    const colorResult = PerceptualColor.tryFromHex(colorHex);\n    if (!colorResult.success) return null;\n\n    const result = await governance.execute({\n      subject: {\n        type: 'color',\n        color: colorResult.value,\n        purpose,\n      },\n    });\n\n    if (result.success) {\n      setComplianceHistory(prev => [...prev.slice(-99), result.value.complianceScore]);\n      return result.value;\n    }\n    return null;\n  }, [governance]);\n\n  const checkAccessibility = useCallback(async (\n    foregroundHex: string,\n    backgroundHex: string\n  ): Promise<GovernanceEnforcementOutput | null> => {\n    if (!governance) return null;\n\n    const fgResult = PerceptualColor.tryFromHex(foregroundHex);\n    const bgResult = PerceptualColor.tryFromHex(backgroundHex);\n    if (!fgResult.success || !bgResult.success) return null;\n\n    const fg = fgResult.value;\n    const bg = bgResult.value;\n\n    // Calculate contrast\n    const fgLum = fg.oklch.l;\n    const bgLum = bg.oklch.l;\n    const lighter = Math.max(fgLum, bgLum);\n    const darker = Math.min(fgLum, bgLum);\n    const contrastRatio = (lighter + 0.05) / (darker + 0.05);\n    const apcaValue = Math.abs(bgLum - fgLum) * 100;\n\n    const result = await governance.execute({\n      subject: {\n        type: 'accessibility',\n        foreground: fg,\n        background: bg,\n        contrastRatio,\n        apcaValue,\n      },\n    });\n\n    if (result.success) {\n      setComplianceHistory(prev => [...prev.slice(-99), result.value.complianceScore]);\n      return result.value;\n    }\n    return null;\n  }, [governance]);\n\n  const checkTokens = useCallback(async (\n    tokens: TokenCollection\n  ): Promise<GovernanceEnforcementOutput | null> => {\n    if (!governance) return null;\n\n    const result = await governance.execute({\n      subject: {\n        type: 'tokens',\n        tokens,\n      },\n    });\n\n    if (result.success) {\n      setComplianceHistory(prev => [...prev.slice(-99), result.value.complianceScore]);\n      return result.value;\n    }\n    return null;\n  }, [governance]);\n\n  const checkTheme = useCallback(async (config: {\n    hasLightMode: boolean;\n    hasDarkMode: boolean;\n    brandColorHex?: string;\n  }): Promise<GovernanceEnforcementOutput | null> => {\n    if (!governance) return null;\n\n    let brandColor: PerceptualColor | undefined;\n    if (config.brandColorHex) {\n      const colorResult = PerceptualColor.tryFromHex(config.brandColorHex);\n      if (colorResult.success) {\n        brandColor = colorResult.value;\n      }\n    }\n\n    const result = await governance.execute({\n      subject: {\n        type: 'theme',\n        hasLightMode: config.hasLightMode,\n        hasDarkMode: config.hasDarkMode,\n        brandColor,\n      },\n    });\n\n    if (result.success) {\n      setComplianceHistory(prev => [...prev.slice(-99), result.value.complianceScore]);\n      return result.value;\n    }\n    return null;\n  }, [governance]);\n\n  const checkComponent = useCallback(async (\n    componentName: string,\n    tokens?: TokenCollection,\n    brandColorHex?: string\n  ): Promise<GovernanceEnforcementOutput | null> => {\n    if (!governance) return null;\n\n    let brandColor: PerceptualColor | undefined;\n    if (brandColorHex) {\n      const colorResult = PerceptualColor.tryFromHex(brandColorHex);\n      if (colorResult.success) {\n        brandColor = colorResult.value;\n      }\n    }\n\n    const result = await governance.execute({\n      subject: {\n        type: 'component',\n        componentName,\n        tokens,\n        brandColor,\n      },\n    });\n\n    if (result.success) {\n      setComplianceHistory(prev => [...prev.slice(-99), result.value.complianceScore]);\n      return result.value;\n    }\n    return null;\n  }, [governance]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // QUICK CHECKS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const isColorCompliant = useCallback(async (colorHex: string): Promise<boolean> => {\n    const result = await checkColor(colorHex);\n    return result?.compliant ?? true;\n  }, [checkColor]);\n\n  const isAccessibilityCompliant = useCallback(async (fg: string, bg: string): Promise<boolean> => {\n    const result = await checkAccessibility(fg, bg);\n    return result?.compliant ?? true;\n  }, [checkAccessibility]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // UTILITIES\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const getPoliciesByScope = useCallback((scope: PolicyScope): readonly EnterprisePolicy[] => {\n    return policySet.byScope(scope);\n  }, [policySet]);\n\n  const getComplianceScore = useCallback((): number => {\n    if (complianceHistory.length === 0) return 100;\n    const sum = complianceHistory.reduce((a, b) => a + b, 0);\n    return sum / complianceHistory.length;\n  }, [complianceHistory]);\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // CONTEXT VALUE\n  // ─────────────────────────────────────────────────────────────────────────\n\n  const contextValue: GovernanceContextValue = useMemo(() => ({\n    // State\n    mode,\n    policySet,\n    isEnabled: mode !== 'disabled',\n\n    // Actions\n    setMode: handleSetMode,\n    addPolicy,\n    removePolicy,\n    enablePolicy,\n    disablePolicy,\n\n    // Enforcement\n    checkColor,\n    checkAccessibility,\n    checkTokens,\n    checkTheme,\n    checkComponent,\n\n    // Quick checks\n    isColorCompliant,\n    isAccessibilityCompliant,\n\n    // Utilities\n    getPoliciesByScope,\n    getComplianceScore,\n  }), [\n    mode,\n    policySet,\n    handleSetMode,\n    addPolicy,\n    removePolicy,\n    enablePolicy,\n    disablePolicy,\n    checkColor,\n    checkAccessibility,\n    checkTokens,\n    checkTheme,\n    checkComponent,\n    isColorCompliant,\n    isAccessibilityCompliant,\n    getPoliciesByScope,\n    getComplianceScore,\n  ]);\n\n  return (\n    <GovernanceContext.Provider value={contextValue}>\n      {children}\n    </GovernanceContext.Provider>\n  );\n}\n\n// ============================================================================\n// HOOKS\n// ============================================================================\n\n/**\n * Hook to access the governance context.\n *\n * @throws Error if used outside GovernanceProvider\n */\nexport function useGovernance(): GovernanceContextValue {\n  const context = useContext(GovernanceContext);\n  if (!context) {\n    throw new Error('useGovernance must be used within a GovernanceProvider');\n  }\n  return context;\n}\n\n/**\n * Hook for color governance checks.\n *\n * @example\n * ```tsx\n * function ColorPicker({ color }: { color: string }) {\n *   const { isCompliant, result, check } = useColorGovernance(color);\n *\n *   return (\n *     <div>\n *       <div style={{ backgroundColor: color }} />\n *       {!isCompliant && <span>This color has issues</span>}\n *     </div>\n *   );\n * }\n * ```\n */\nexport function useColorGovernance(\n  colorHex: string,\n  purpose?: 'brand' | 'text' | 'background' | 'border'\n) {\n  const { checkColor, isEnabled } = useGovernance();\n  const [result, setResult] = useState<GovernanceEnforcementOutput | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const check = useCallback(async () => {\n    if (!isEnabled) return;\n    setLoading(true);\n    const res = await checkColor(colorHex, purpose);\n    setResult(res);\n    setLoading(false);\n  }, [checkColor, colorHex, purpose, isEnabled]);\n\n  useEffect(() => {\n    check();\n  }, [check]);\n\n  return {\n    isCompliant: result?.compliant ?? true,\n    result,\n    loading,\n    check,\n  };\n}\n\n/**\n * Hook for accessibility governance checks.\n */\nexport function useAccessibilityGovernance(foregroundHex: string, backgroundHex: string) {\n  const { checkAccessibility, isEnabled } = useGovernance();\n  const [result, setResult] = useState<GovernanceEnforcementOutput | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const check = useCallback(async () => {\n    if (!isEnabled) return;\n    setLoading(true);\n    const res = await checkAccessibility(foregroundHex, backgroundHex);\n    setResult(res);\n    setLoading(false);\n  }, [checkAccessibility, foregroundHex, backgroundHex, isEnabled]);\n\n  useEffect(() => {\n    check();\n  }, [check]);\n\n  return {\n    isCompliant: result?.compliant ?? true,\n    result,\n    loading,\n    check,\n  };\n}\n\n/**\n * Hook to get overall compliance status.\n */\nexport function useComplianceStatus() {\n  const { getComplianceScore, policySet, mode } = useGovernance();\n\n  const score = getComplianceScore();\n  const status = score >= 90 ? 'excellent' : score >= 70 ? 'good' : score >= 50 ? 'fair' : 'poor';\n\n  return {\n    score,\n    status,\n    mode,\n    totalPolicies: policySet.size,\n    enabledPolicies: policySet.enabled().length,\n  };\n}\n\n// ============================================================================\n// HELPERS\n// ============================================================================\n\nfunction getPolicySetForMode(mode: GovernanceMode): PolicySet {\n  switch (mode) {\n    case 'strict':\n      return createStrictPolicySet();\n    case 'lenient':\n      return createLenientPolicySet();\n    case 'disabled':\n      return new PolicySet([]);\n    default:\n      return createDefaultPolicySet();\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport { GovernanceContext };\nexport default GovernanceProvider;\n"]}