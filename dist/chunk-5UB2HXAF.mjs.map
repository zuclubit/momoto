{"version":3,"sources":["../validation/conformance.ts","../validation/report-generator.ts"],"names":["tokens"],"mappings":"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","file":"chunk-5UB2HXAF.mjs","sourcesContent":["/**\n * @fileoverview Conformance Validation System\n *\n * Sistema de validación para verificar conformidad con la arquitectura\n * hexagonal y los principios de Color Intelligence.\n *\n * @module momoto-ui/validation/conformance\n * @version 1.0.0\n */\n\nimport type { Result } from '../domain/types';\nimport { success, failure } from '../domain/types';\nimport type { PerceptualColor } from '../domain/perceptual';\nimport type { TokenCollection, DesignToken } from '../domain/tokens';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Severity levels for conformance issues.\n */\nexport type ConformanceSeverity = 'error' | 'warning' | 'info';\n\n/**\n * Categories of conformance checks.\n */\nexport type ConformanceCategory =\n  | 'architecture'\n  | 'accessibility'\n  | 'color-intelligence'\n  | 'tokens'\n  | 'performance';\n\n/**\n * A single conformance issue.\n */\nexport interface ConformanceIssue {\n  readonly id: string;\n  readonly category: ConformanceCategory;\n  readonly severity: ConformanceSeverity;\n  readonly message: string;\n  readonly details?: string;\n  readonly location?: string;\n  readonly suggestion?: string;\n}\n\n/**\n * Result of a conformance check.\n */\nexport interface ConformanceCheckResult {\n  readonly checkId: string;\n  readonly checkName: string;\n  readonly passed: boolean;\n  readonly issues: ConformanceIssue[];\n  readonly metadata?: Record<string, unknown>;\n}\n\n/**\n * Complete conformance report.\n */\nexport interface ConformanceReport {\n  readonly timestamp: Date;\n  readonly version: string;\n  readonly summary: {\n    readonly totalChecks: number;\n    readonly passed: number;\n    readonly failed: number;\n    readonly errors: number;\n    readonly warnings: number;\n    readonly infos: number;\n  };\n  readonly checks: ConformanceCheckResult[];\n  readonly overallPassed: boolean;\n  readonly complianceScore: number;\n}\n\n/**\n * Options for running conformance checks.\n */\nexport interface ConformanceOptions {\n  readonly includeInfos?: boolean;\n  readonly failOnWarnings?: boolean;\n  readonly categories?: ConformanceCategory[];\n  readonly skipChecks?: string[];\n}\n\n// ============================================================================\n// CONFORMANCE CHECKER\n// ============================================================================\n\n/**\n * ConformanceChecker - Validates conformance with design system standards.\n *\n * Runs various checks to ensure:\n * - Architectural boundaries are respected\n * - Color Intelligence principles are followed\n * - Accessibility requirements are met\n * - Token standards are maintained\n *\n * @example\n * ```typescript\n * const checker = new ConformanceChecker();\n *\n * const report = await checker.runAll({\n *   tokenCollection: tokens,\n *   colors: themeColors,\n * });\n *\n * if (!report.overallPassed) {\n *   console.log('Conformance issues found:', report.summary);\n * }\n * ```\n */\nexport class ConformanceChecker {\n  // ─────────────────────────────────────────────────────────────────────────\n  // PROPERTIES\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private readonly checks: Map<string, ConformanceCheck> = new Map();\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // CONSTRUCTOR\n  // ─────────────────────────────────────────────────────────────────────────\n\n  constructor() {\n    this.registerDefaultChecks();\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // PUBLIC METHODS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Run all registered conformance checks.\n   */\n  async runAll(\n    context: ConformanceContext,\n    options: ConformanceOptions = {}\n  ): Promise<ConformanceReport> {\n    const results: ConformanceCheckResult[] = [];\n    const categoriesToRun = options.categories ?? [\n      'architecture',\n      'accessibility',\n      'color-intelligence',\n      'tokens',\n      'performance',\n    ];\n    const skipSet = new Set(options.skipChecks ?? []);\n\n    for (const [id, check] of this.checks) {\n      if (skipSet.has(id)) continue;\n      if (!categoriesToRun.includes(check.category)) continue;\n\n      const result = await check.run(context);\n      results.push(result);\n    }\n\n    return this.generateReport(results, options);\n  }\n\n  /**\n   * Run a specific conformance check.\n   */\n  async runCheck(\n    checkId: string,\n    context: ConformanceContext\n  ): Promise<Result<ConformanceCheckResult, Error>> {\n    const check = this.checks.get(checkId);\n    if (!check) {\n      return failure(new Error(`Check not found: ${checkId}`));\n    }\n\n    const result = await check.run(context);\n    return success(result);\n  }\n\n  /**\n   * Register a custom conformance check.\n   */\n  registerCheck(check: ConformanceCheck): void {\n    this.checks.set(check.id, check);\n  }\n\n  /**\n   * Get all registered check IDs.\n   */\n  getCheckIds(): string[] {\n    return Array.from(this.checks.keys());\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // PRIVATE METHODS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private registerDefaultChecks(): void {\n    // Accessibility checks\n    this.registerCheck(new ContrastRatioCheck());\n    this.registerCheck(new ColorBlindnessCheck());\n\n    // Color Intelligence checks\n    this.registerCheck(new PerceptualUniformityCheck());\n    this.registerCheck(new GamutBoundaryCheck());\n    this.registerCheck(new HardcodedColorCheck());\n\n    // Token checks\n    this.registerCheck(new TokenNamingConventionCheck());\n    this.registerCheck(new TokenCompletenessCheck());\n    this.registerCheck(new TokenTypeValidationCheck());\n\n    // Architecture checks\n    this.registerCheck(new DependencyDirectionCheck());\n    this.registerCheck(new PortContractCheck());\n  }\n\n  private generateReport(\n    results: ConformanceCheckResult[],\n    options: ConformanceOptions\n  ): ConformanceReport {\n    let errors = 0;\n    let warnings = 0;\n    let infos = 0;\n\n    for (const result of results) {\n      for (const issue of result.issues) {\n        switch (issue.severity) {\n          case 'error':\n            errors++;\n            break;\n          case 'warning':\n            warnings++;\n            break;\n          case 'info':\n            infos++;\n            break;\n        }\n      }\n    }\n\n    const passed = results.filter((r) => r.passed).length;\n    const failed = results.filter((r) => !r.passed).length;\n\n    const overallPassed = options.failOnWarnings\n      ? errors === 0 && warnings === 0\n      : errors === 0;\n\n    const complianceScore = this.calculateComplianceScore(results);\n\n    return {\n      timestamp: new Date(),\n      version: '1.0.0',\n      summary: {\n        totalChecks: results.length,\n        passed,\n        failed,\n        errors,\n        warnings,\n        infos,\n      },\n      checks: results,\n      overallPassed,\n      complianceScore,\n    };\n  }\n\n  private calculateComplianceScore(results: ConformanceCheckResult[]): number {\n    if (results.length === 0) return 100;\n\n    let totalWeight = 0;\n    let earnedScore = 0;\n\n    for (const result of results) {\n      const weight = this.getCheckWeight(result.checkId);\n      totalWeight += weight;\n\n      if (result.passed) {\n        earnedScore += weight;\n      } else {\n        // Partial credit based on issue severity\n        const errorCount = result.issues.filter(\n          (i) => i.severity === 'error'\n        ).length;\n        const warningCount = result.issues.filter(\n          (i) => i.severity === 'warning'\n        ).length;\n        const totalIssues = result.issues.length;\n\n        if (totalIssues > 0) {\n          const severityPenalty =\n            (errorCount * 1.0 + warningCount * 0.5) / totalIssues;\n          earnedScore += weight * Math.max(0, 1 - severityPenalty);\n        }\n      }\n    }\n\n    return Math.round((earnedScore / totalWeight) * 100);\n  }\n\n  private getCheckWeight(checkId: string): number {\n    const weights: Record<string, number> = {\n      'contrast-ratio': 10,\n      'color-blindness': 5,\n      'perceptual-uniformity': 8,\n      'gamut-boundary': 5,\n      'hardcoded-colors': 10,\n      'token-naming': 5,\n      'token-completeness': 5,\n      'token-type-validation': 5,\n      'dependency-direction': 8,\n      'port-contract': 8,\n    };\n\n    return weights[checkId] ?? 5;\n  }\n}\n\n// ============================================================================\n// CONFORMANCE CONTEXT\n// ============================================================================\n\n/**\n * Context provided to conformance checks.\n */\nexport interface ConformanceContext {\n  readonly tokenCollection?: TokenCollection;\n  readonly colors?: Map<string, PerceptualColor>;\n  readonly themeConfig?: unknown;\n  readonly sourceCode?: string[];\n  readonly cssVariables?: Map<string, string>;\n}\n\n// ============================================================================\n// BASE CHECK\n// ============================================================================\n\n/**\n * Base interface for conformance checks.\n */\nexport interface ConformanceCheck {\n  readonly id: string;\n  readonly name: string;\n  readonly category: ConformanceCategory;\n  readonly description: string;\n  run(context: ConformanceContext): Promise<ConformanceCheckResult>;\n}\n\n// ============================================================================\n// ACCESSIBILITY CHECKS\n// ============================================================================\n\n/**\n * Check for WCAG contrast ratio compliance.\n */\nclass ContrastRatioCheck implements ConformanceCheck {\n  readonly id = 'contrast-ratio';\n  readonly name = 'WCAG Contrast Ratio';\n  readonly category: ConformanceCategory = 'accessibility';\n  readonly description = 'Validates color combinations meet WCAG 2.1 AA contrast requirements';\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const colors = context.colors;\n\n    if (!colors || colors.size === 0) {\n      return {\n        checkId: this.id,\n        checkName: this.name,\n        passed: true,\n        issues: [],\n        metadata: { skipped: true, reason: 'No colors provided' },\n      };\n    }\n\n    // Check text on background combinations\n    const bg = colors.get('background');\n    const text = colors.get('text');\n    const primary = colors.get('primary');\n\n    if (bg && text) {\n      const contrast = this.calculateContrast(bg, text);\n      if (contrast < 4.5) {\n        issues.push({\n          id: `${this.id}-text-bg`,\n          category: this.category,\n          severity: 'error',\n          message: `Text/background contrast ratio (${contrast.toFixed(2)}) is below WCAG AA minimum (4.5:1)`,\n          location: 'colors.text / colors.background',\n          suggestion: 'Increase lightness difference between text and background colors',\n        });\n      }\n    }\n\n    if (bg && primary) {\n      const contrast = this.calculateContrast(bg, primary);\n      if (contrast < 3.0) {\n        issues.push({\n          id: `${this.id}-primary-bg`,\n          category: this.category,\n          severity: 'warning',\n          message: `Primary/background contrast ratio (${contrast.toFixed(2)}) may be insufficient for UI elements`,\n          location: 'colors.primary / colors.background',\n          suggestion: 'Consider adjusting primary color lightness for better visibility',\n        });\n      }\n    }\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      issues,\n    };\n  }\n\n  private calculateContrast(color1: PerceptualColor, color2: PerceptualColor): number {\n    // Simplified contrast calculation using relative luminance\n    const l1 = color1.lightness;\n    const l2 = color2.lightness;\n    const lighter = Math.max(l1, l2);\n    const darker = Math.min(l1, l2);\n    return (lighter + 0.05) / (darker + 0.05);\n  }\n}\n\n/**\n * Check for color blindness accessibility.\n */\nclass ColorBlindnessCheck implements ConformanceCheck {\n  readonly id = 'color-blindness';\n  readonly name = 'Color Blindness Accessibility';\n  readonly category: ConformanceCategory = 'accessibility';\n  readonly description = 'Validates colors are distinguishable for color-blind users';\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const colors = context.colors;\n\n    if (!colors || colors.size < 2) {\n      return {\n        checkId: this.id,\n        checkName: this.name,\n        passed: true,\n        issues: [],\n        metadata: { skipped: true, reason: 'Insufficient colors for comparison' },\n      };\n    }\n\n    // Check for red/green combinations (deuteranopia/protanopia)\n    const colorArray = Array.from(colors.entries());\n    for (let i = 0; i < colorArray.length; i++) {\n      for (let j = i + 1; j < colorArray.length; j++) {\n        const [name1, color1] = colorArray[i];\n        const [name2, color2] = colorArray[j];\n\n        // Check if both are in problematic hue ranges\n        if (this.isRedGreenPair(color1, color2)) {\n          const lightnessDiff = Math.abs(color1.lightness - color2.lightness);\n          if (lightnessDiff < 0.3) {\n            issues.push({\n              id: `${this.id}-${name1}-${name2}`,\n              category: this.category,\n              severity: 'warning',\n              message: `${name1} and ${name2} may be indistinguishable for red-green color blind users`,\n              location: `colors.${name1} / colors.${name2}`,\n              suggestion: 'Increase lightness difference between these colors or use different hues',\n            });\n          }\n        }\n      }\n    }\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      issues,\n    };\n  }\n\n  private isRedGreenPair(c1: PerceptualColor, c2: PerceptualColor): boolean {\n    const isRedish = (h: number) => h < 30 || h > 330;\n    const isGreenish = (h: number) => h > 80 && h < 160;\n\n    return (\n      (isRedish(c1.hue) && isGreenish(c2.hue)) ||\n      (isGreenish(c1.hue) && isRedish(c2.hue))\n    );\n  }\n}\n\n// ============================================================================\n// COLOR INTELLIGENCE CHECKS\n// ============================================================================\n\n/**\n * Check for perceptual uniformity in color scales.\n */\nclass PerceptualUniformityCheck implements ConformanceCheck {\n  readonly id = 'perceptual-uniformity';\n  readonly name = 'Perceptual Uniformity';\n  readonly category: ConformanceCategory = 'color-intelligence';\n  readonly description = 'Validates color scales have perceptually uniform steps';\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const tokens = context.tokenCollection;\n\n    if (!tokens) {\n      return {\n        checkId: this.id,\n        checkName: this.name,\n        passed: true,\n        issues: [],\n        metadata: { skipped: true, reason: 'No token collection provided' },\n      };\n    }\n\n    // Look for color scale tokens (e.g., color.brand.100, color.brand.200, etc.)\n    // First filter by type using TokenFilter, then filter for scale pattern\n    const colorTokens = tokens.filter({ type: 'color' });\n    const scaleTokens = colorTokens.filter(t => /\\.\\d{2,3}$/.test(t.name));\n\n    // Group by prefix\n    const scales = new Map<string, DesignToken[]>();\n    for (const token of scaleTokens) {\n      const prefix = token.name.replace(/\\.\\d{2,3}$/, '');\n      if (!scales.has(prefix)) {\n        scales.set(prefix, []);\n      }\n      scales.get(prefix)!.push(token);\n    }\n\n    // Check each scale for uniformity\n    for (const [prefix, tokens] of scales) {\n      if (tokens.length < 3) continue;\n\n      // Sort by step number\n      const sorted = tokens.sort((a, b) => {\n        const stepA = parseInt(a.name.match(/\\.(\\d{2,3})$/)?.[1] ?? '0');\n        const stepB = parseInt(b.name.match(/\\.(\\d{2,3})$/)?.[1] ?? '0');\n        return stepA - stepB;\n      });\n\n      // Check lightness progression - extract from ColorTokenValue perceptual data\n      const lightnesses = sorted.map((t) => {\n        const colorValue = t.value as { type: 'color'; perceptual?: { oklch: { l: number } } };\n        return colorValue.perceptual?.oklch.l ?? 0.5;\n      });\n\n      const diffs: number[] = [];\n      for (let i = 1; i < lightnesses.length; i++) {\n        diffs.push(Math.abs(lightnesses[i] - lightnesses[i - 1]));\n      }\n\n      const avgDiff = diffs.reduce((a, b) => a + b, 0) / diffs.length;\n      const maxDeviation = Math.max(...diffs.map((d) => Math.abs(d - avgDiff)));\n\n      if (maxDeviation > avgDiff * 0.5) {\n        issues.push({\n          id: `${this.id}-${prefix}`,\n          category: this.category,\n          severity: 'warning',\n          message: `Color scale '${prefix}' has non-uniform perceptual steps`,\n          details: `Max deviation: ${(maxDeviation * 100).toFixed(1)}% from average step`,\n          location: prefix,\n          suggestion: 'Use Color Intelligence palette generation for uniform scales',\n        });\n      }\n    }\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      issues,\n    };\n  }\n}\n\n/**\n * Check for colors outside displayable gamut.\n */\nclass GamutBoundaryCheck implements ConformanceCheck {\n  readonly id = 'gamut-boundary';\n  readonly name = 'Gamut Boundary';\n  readonly category: ConformanceCategory = 'color-intelligence';\n  readonly description = 'Validates colors are within displayable gamut';\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const colors = context.colors;\n\n    if (!colors) {\n      return {\n        checkId: this.id,\n        checkName: this.name,\n        passed: true,\n        issues: [],\n        metadata: { skipped: true, reason: 'No colors provided' },\n      };\n    }\n\n    for (const [name, color] of colors) {\n      // Check OKLCH gamut boundaries\n      if (color.chroma > 0.37) {\n        issues.push({\n          id: `${this.id}-${name}`,\n          category: this.category,\n          severity: 'warning',\n          message: `Color '${name}' has very high chroma (${color.chroma.toFixed(3)}) which may be outside sRGB gamut`,\n          location: `colors.${name}`,\n          suggestion: 'Reduce chroma or use gamut mapping for wider compatibility',\n        });\n      }\n\n      // Check for invalid ranges\n      if (color.lightness < 0 || color.lightness > 1) {\n        issues.push({\n          id: `${this.id}-${name}-lightness`,\n          category: this.category,\n          severity: 'error',\n          message: `Color '${name}' has invalid lightness value: ${color.lightness}`,\n          location: `colors.${name}`,\n          suggestion: 'Lightness must be between 0 and 1',\n        });\n      }\n    }\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      issues,\n    };\n  }\n}\n\n/**\n * Check for hardcoded color values.\n */\nclass HardcodedColorCheck implements ConformanceCheck {\n  readonly id = 'hardcoded-colors';\n  readonly name = 'No Hardcoded Colors';\n  readonly category: ConformanceCategory = 'color-intelligence';\n  readonly description = 'Validates no hardcoded color values exist outside the design system';\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const sourceCode = context.sourceCode ?? [];\n\n    const hexPattern = /#[0-9A-Fa-f]{3,8}\\b/g;\n    const rgbPattern = /rgba?\\s*\\(\\s*\\d+/g;\n    const hslPattern = /hsla?\\s*\\(\\s*\\d+/g;\n\n    for (const code of sourceCode) {\n      const lines = code.split('\\n');\n\n      for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n\n        // Skip comments\n        if (line.trim().startsWith('//') || line.trim().startsWith('*')) {\n          continue;\n        }\n\n        // Skip CSS variable definitions (these are OK)\n        if (line.includes('--') && line.includes(':')) {\n          continue;\n        }\n\n        // Check for hex colors\n        const hexMatches = line.match(hexPattern);\n        if (hexMatches) {\n          for (const match of hexMatches) {\n            issues.push({\n              id: `${this.id}-line${i + 1}`,\n              category: this.category,\n              severity: 'error',\n              message: `Hardcoded hex color found: ${match}`,\n              location: `Line ${i + 1}`,\n              suggestion: 'Use a design token or CSS variable instead',\n            });\n          }\n        }\n\n        // Check for rgb colors\n        const rgbMatches = line.match(rgbPattern);\n        if (rgbMatches) {\n          issues.push({\n            id: `${this.id}-rgb-line${i + 1}`,\n            category: this.category,\n            severity: 'error',\n            message: 'Hardcoded RGB color found',\n            location: `Line ${i + 1}`,\n            suggestion: 'Use a design token or CSS variable instead',\n          });\n        }\n\n        // Check for hsl colors\n        const hslMatches = line.match(hslPattern);\n        if (hslMatches) {\n          issues.push({\n            id: `${this.id}-hsl-line${i + 1}`,\n            category: this.category,\n            severity: 'error',\n            message: 'Hardcoded HSL color found',\n            location: `Line ${i + 1}`,\n            suggestion: 'Use a design token or CSS variable instead',\n          });\n        }\n      }\n    }\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      issues,\n      metadata: { filesScanned: sourceCode.length },\n    };\n  }\n}\n\n// ============================================================================\n// TOKEN CHECKS\n// ============================================================================\n\n/**\n * Check token naming conventions.\n */\nclass TokenNamingConventionCheck implements ConformanceCheck {\n  readonly id = 'token-naming';\n  readonly name = 'Token Naming Convention';\n  readonly category: ConformanceCategory = 'tokens';\n  readonly description = 'Validates token paths follow naming conventions';\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const tokens = context.tokenCollection;\n\n    if (!tokens) {\n      return {\n        checkId: this.id,\n        checkName: this.name,\n        passed: true,\n        issues: [],\n        metadata: { skipped: true, reason: 'No token collection provided' },\n      };\n    }\n\n    const allTokens = tokens.getAll();\n    const validPathPattern = /^[a-z][a-z0-9]*(\\.[a-z][a-z0-9]*)*$/;\n\n    for (const token of allTokens) {\n      // Check name format (using name which is the string, not path which is string[])\n      if (!validPathPattern.test(token.name)) {\n        issues.push({\n          id: `${this.id}-${token.name}`,\n          category: this.category,\n          severity: 'warning',\n          message: `Token name '${token.name}' doesn't follow naming convention`,\n          suggestion: 'Use lowercase dot-separated names (e.g., color.brand.primary)',\n        });\n      }\n\n      // Check for overly deep nesting (path is already string[])\n      const depth = token.path.length;\n      if (depth > 5) {\n        issues.push({\n          id: `${this.id}-depth-${token.name}`,\n          category: this.category,\n          severity: 'info',\n          message: `Token '${token.name}' has deep nesting (${depth} levels)`,\n          suggestion: 'Consider flattening token structure for easier maintenance',\n        });\n      }\n    }\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      issues,\n    };\n  }\n}\n\n/**\n * Check for token completeness.\n */\nclass TokenCompletenessCheck implements ConformanceCheck {\n  readonly id = 'token-completeness';\n  readonly name = 'Token Completeness';\n  readonly category: ConformanceCategory = 'tokens';\n  readonly description = 'Validates required token categories are present';\n\n  private readonly requiredCategories = [\n    'color.primary',\n    'color.background',\n    'color.text',\n  ];\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const tokens = context.tokenCollection;\n\n    if (!tokens) {\n      return {\n        checkId: this.id,\n        checkName: this.name,\n        passed: true,\n        issues: [],\n        metadata: { skipped: true, reason: 'No token collection provided' },\n      };\n    }\n\n    for (const requiredPrefix of this.requiredCategories) {\n      // Use filter with name pattern since find() takes TokenFilter, not callback\n      const matchingTokens = tokens.filter({ name: new RegExp(`^${requiredPrefix}`) });\n      if (matchingTokens.length === 0) {\n        issues.push({\n          id: `${this.id}-missing-${requiredPrefix}`,\n          category: this.category,\n          severity: 'error',\n          message: `Required token category '${requiredPrefix}' is missing`,\n          suggestion: `Add tokens with names starting with '${requiredPrefix}'`,\n        });\n      }\n    }\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      issues,\n    };\n  }\n}\n\n/**\n * Check token type validation.\n */\nclass TokenTypeValidationCheck implements ConformanceCheck {\n  readonly id = 'token-type-validation';\n  readonly name = 'Token Type Validation';\n  readonly category: ConformanceCategory = 'tokens';\n  readonly description = 'Validates token values match their declared types';\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const tokens = context.tokenCollection;\n\n    if (!tokens) {\n      return {\n        checkId: this.id,\n        checkName: this.name,\n        passed: true,\n        issues: [],\n        metadata: { skipped: true, reason: 'No token collection provided' },\n      };\n    }\n\n    const allTokens = tokens.getAll();\n\n    for (const token of allTokens) {\n      const typeError = this.validateTokenType(token);\n      if (typeError) {\n        issues.push({\n          id: `${this.id}-${token.name}`,\n          category: this.category,\n          severity: 'error',\n          message: typeError,\n          location: token.name,\n        });\n      }\n    }\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      issues,\n    };\n  }\n\n  private validateTokenType(token: DesignToken): string | null {\n    const tokenValue = token.value;\n    const type = token.type;\n\n    // TokenValue is an object with a 'type' field and type-specific properties\n    // Access the actual value based on token type\n    switch (type) {\n      case 'color': {\n        const colorVal = tokenValue as { type: 'color'; value: string };\n        if (typeof colorVal.value !== 'string') {\n          return `Color token must have string value, got ${typeof colorVal.value}`;\n        }\n        if (!/^(#|rgb|hsl|oklch|lch|lab)/.test(colorVal.value)) {\n          return `Invalid color format: ${colorVal.value}`;\n        }\n        break;\n      }\n\n      case 'dimension': {\n        const dimVal = tokenValue as { type: 'dimension'; value: number; unit: string };\n        if (typeof dimVal.value !== 'number') {\n          return `Dimension token must have numeric value, got ${typeof dimVal.value}`;\n        }\n        if (!['px', 'rem', 'em', '%', 'vw', 'vh'].includes(dimVal.unit)) {\n          return `Invalid dimension unit: ${dimVal.unit}`;\n        }\n        break;\n      }\n\n      case 'fontFamily':\n        // fontFamily tokens would have string value - validation depends on schema\n        break;\n\n      case 'fontWeight':\n        // fontWeight tokens - validation depends on schema\n        break;\n\n      case 'shadow':\n      case 'gradient':\n      case 'composite':\n        // Complex types have object values - validated by structure\n        break;\n    }\n\n    return null;\n  }\n}\n\n// ============================================================================\n// ARCHITECTURE CHECKS\n// ============================================================================\n\n/**\n * Check dependency direction in hexagonal architecture.\n */\nclass DependencyDirectionCheck implements ConformanceCheck {\n  readonly id = 'dependency-direction';\n  readonly name = 'Dependency Direction';\n  readonly category: ConformanceCategory = 'architecture';\n  readonly description = 'Validates dependencies point inward (hexagonal architecture)';\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const sourceCode = context.sourceCode ?? [];\n\n    // Check for imports that violate dependency direction\n    // Note: domainImportInAdapter and appImportInAdapter are valid imports\n    // (adapters CAN import from domain and application - they implement ports)\n    const adapterImportInDomain = /from\\s+['\"].*\\/adapters?\\//;\n    const infraImportInDomain = /from\\s+['\"].*\\/infrastructure\\//;\n\n    for (const code of sourceCode) {\n      const lines = code.split('\\n');\n\n      for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n\n        // These patterns would need actual file path context to work properly\n        // This is a simplified check\n        if (\n          line.includes('/domain/') &&\n          (adapterImportInDomain.test(line) || infraImportInDomain.test(line))\n        ) {\n          issues.push({\n            id: `${this.id}-line${i + 1}`,\n            category: this.category,\n            severity: 'error',\n            message: 'Domain layer should not import from adapters or infrastructure',\n            location: `Line ${i + 1}`,\n            suggestion: 'Dependencies should point inward only',\n          });\n        }\n      }\n    }\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      issues,\n      metadata: { note: 'Requires source code context for full validation' },\n    };\n  }\n}\n\n/**\n * Check port contracts are properly defined.\n *\n * Validates:\n * - Port files export interfaces (not classes)\n * - Port interfaces use Result types for error handling\n * - Port methods are documented\n *\n * Note: Full AST validation requires TypeScript compiler API.\n * This implementation performs static analysis via regex patterns.\n */\nclass PortContractCheck implements ConformanceCheck {\n  readonly id = 'port-contract';\n  readonly name = 'Port Contract Definition';\n  readonly category: ConformanceCategory = 'architecture';\n  readonly description = 'Validates ports define proper contracts with Result types';\n\n  /**\n   * Pattern to detect class exports (ports should be interfaces)\n   */\n  private readonly classExportPattern = /export\\s+class\\s+\\w+Port/;\n\n  /**\n   * Pattern to detect interface exports (expected for ports)\n   */\n  private readonly interfaceExportPattern = /export\\s+interface\\s+(\\w+Port)/g;\n\n  /**\n   * Pattern to detect Promise returns without Result wrapper\n   */\n  private readonly barePromisePattern = /:\\s*Promise<(?!Result)[^>]+>/;\n\n  /**\n   * Pattern to detect Result type usage\n   */\n  private readonly resultTypePattern = /Result<[^>]+>/;\n\n  async run(context: ConformanceContext): Promise<ConformanceCheckResult> {\n    const issues: ConformanceIssue[] = [];\n    const sourceCode = context.sourceCode ?? [];\n\n    // If no source code provided, explicitly skip with clear indication\n    if (sourceCode.length === 0) {\n      return {\n        checkId: this.id,\n        checkName: this.name,\n        passed: false,  // Not passed - we didn't validate anything\n        issues: [{\n          id: `${this.id}-no-source`,\n          category: this.category,\n          severity: 'warning',\n          message: 'Port contract validation skipped: no source code provided',\n          details: 'Provide port file contents in context.sourceCode for validation',\n          suggestion: 'Run validation with sourceCode context populated',\n        }],\n        metadata: {\n          skipped: true,\n          reason: 'No source code provided for analysis',\n        },\n      };\n    }\n\n    // Analyze each source file for port contract violations\n    for (let fileIndex = 0; fileIndex < sourceCode.length; fileIndex++) {\n      const code = sourceCode[fileIndex];\n\n      // Check 1: Ports should be interfaces, not classes\n      if (this.classExportPattern.test(code)) {\n        issues.push({\n          id: `${this.id}-class-port-file${fileIndex}`,\n          category: this.category,\n          severity: 'error',\n          message: 'Port defined as class instead of interface',\n          details: 'Ports in hexagonal architecture must be interfaces to enable dependency inversion',\n          location: `File ${fileIndex + 1}`,\n          suggestion: 'Convert \"export class XxxPort\" to \"export interface XxxPort\"',\n        });\n      }\n\n      // Check 2: Find all port interfaces\n      const interfaceMatches = code.matchAll(this.interfaceExportPattern);\n      for (const match of interfaceMatches) {\n        const portName = match[1];\n        const startIndex = match.index ?? 0;\n\n        // Extract the interface body (simplified - looks for matching braces)\n        const interfaceBody = this.extractInterfaceBody(code, startIndex);\n\n        if (interfaceBody) {\n          // Check 3: Port methods should return Result types (not bare Promises)\n          const methodLines = interfaceBody.split('\\n');\n          for (let i = 0; i < methodLines.length; i++) {\n            const line = methodLines[i];\n\n            // Skip empty lines, comments, and lines without method signatures\n            if (!line.includes(':') || line.trim().startsWith('//') || line.trim().startsWith('*')) {\n              continue;\n            }\n\n            // Check for bare Promise returns (should use Result<T, E>)\n            if (this.barePromisePattern.test(line) && !this.resultTypePattern.test(line)) {\n              issues.push({\n                id: `${this.id}-bare-promise-${portName}`,\n                category: this.category,\n                severity: 'warning',\n                message: `Port '${portName}' has method with bare Promise return type`,\n                details: 'Port methods should return Result<T, E> for explicit error handling',\n                location: portName,\n                suggestion: 'Use Promise<Result<SuccessType, Error>> instead of Promise<SuccessType>',\n              });\n              break; // One warning per interface is enough\n            }\n          }\n        }\n      }\n\n      // Check 4: Look for adapter implementations that don't implement all methods\n      // (Basic check - looks for \"implements XxxPort\" and verifies class isn't empty)\n      const implementsPattern = /class\\s+\\w+\\s+implements\\s+(\\w+Port)/g;\n      const implementsMatches = code.matchAll(implementsPattern);\n\n      for (const match of implementsMatches) {\n        const portName = match[1];\n        const classBody = this.extractInterfaceBody(code, match.index ?? 0);\n\n        if (classBody && classBody.split('\\n').filter(l => l.trim()).length < 3) {\n          issues.push({\n            id: `${this.id}-empty-adapter-${portName}`,\n            category: this.category,\n            severity: 'error',\n            message: `Adapter implementing '${portName}' appears to be empty or incomplete`,\n            location: `File ${fileIndex + 1}`,\n            suggestion: 'Implement all required port methods',\n          });\n        }\n      }\n    }\n\n    // Determine pass/fail based on errors (not warnings)\n    const errorCount = issues.filter(i => i.severity === 'error').length;\n\n    return {\n      checkId: this.id,\n      checkName: this.name,\n      passed: errorCount === 0,\n      issues,\n      metadata: {\n        filesAnalyzed: sourceCode.length,\n        validationType: 'static-regex',\n        note: 'Full AST validation available via TypeScript compiler API integration',\n      },\n    };\n  }\n\n  /**\n   * Extract interface/class body starting from a given position.\n   * Simplified implementation using brace counting.\n   */\n  private extractInterfaceBody(code: string, startIndex: number): string | null {\n    const openBrace = code.indexOf('{', startIndex);\n    if (openBrace === -1) return null;\n\n    let depth = 1;\n    let pos = openBrace + 1;\n\n    while (depth > 0 && pos < code.length) {\n      if (code[pos] === '{') depth++;\n      if (code[pos] === '}') depth--;\n      pos++;\n    }\n\n    if (depth === 0) {\n      return code.slice(openBrace + 1, pos - 1);\n    }\n\n    return null;\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport {\n  ContrastRatioCheck,\n  ColorBlindnessCheck,\n  PerceptualUniformityCheck,\n  GamutBoundaryCheck,\n  HardcodedColorCheck,\n  TokenNamingConventionCheck,\n  TokenCompletenessCheck,\n  TokenTypeValidationCheck,\n  DependencyDirectionCheck,\n  PortContractCheck,\n};\n\nexport default ConformanceChecker;\n","/**\n * @fileoverview Conformance Report Generator\n *\n * Generates human-readable reports from conformance check results.\n * Supports multiple output formats: text, markdown, JSON, and HTML.\n *\n * @module momoto-ui/validation/report-generator\n * @version 1.0.0\n */\n\nimport type {\n  ConformanceReport,\n  ConformanceCheckResult,\n  ConformanceIssue,\n  ConformanceSeverity,\n} from './conformance';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\n/**\n * Report output formats.\n */\nexport type ReportFormat = 'text' | 'markdown' | 'json' | 'html';\n\n/**\n * Report generation options.\n */\nexport interface ReportOptions {\n  readonly format: ReportFormat;\n  readonly includePassedChecks?: boolean;\n  readonly includeSuggestions?: boolean;\n  readonly includeMetadata?: boolean;\n  readonly title?: string;\n}\n\n// ============================================================================\n// REPORT GENERATOR\n// ============================================================================\n\n/**\n * ReportGenerator - Generates formatted conformance reports.\n *\n * @example\n * ```typescript\n * const generator = new ReportGenerator();\n *\n * const textReport = generator.generate(conformanceReport, {\n *   format: 'text',\n *   includePassedChecks: false,\n * });\n *\n * const mdReport = generator.generate(conformanceReport, {\n *   format: 'markdown',\n *   title: 'Design System Conformance Report',\n * });\n * ```\n */\nexport class ReportGenerator {\n  // ─────────────────────────────────────────────────────────────────────────\n  // PUBLIC METHODS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  /**\n   * Generate a formatted report from conformance results.\n   */\n  generate(report: ConformanceReport, options: ReportOptions): string {\n    switch (options.format) {\n      case 'text':\n        return this.generateTextReport(report, options);\n      case 'markdown':\n        return this.generateMarkdownReport(report, options);\n      case 'json':\n        return this.generateJsonReport(report, options);\n      case 'html':\n        return this.generateHtmlReport(report, options);\n      default:\n        throw new Error(`Unsupported format: ${options.format}`);\n    }\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // TEXT FORMAT\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private generateTextReport(report: ConformanceReport, options: ReportOptions): string {\n    const lines: string[] = [];\n    const title = options.title ?? 'UI Kit Conformance Report';\n\n    // Header\n    lines.push('═'.repeat(60));\n    lines.push(this.centerText(title, 60));\n    lines.push('═'.repeat(60));\n    lines.push('');\n\n    // Summary\n    lines.push('SUMMARY');\n    lines.push('─'.repeat(40));\n    lines.push(`Timestamp:        ${report.timestamp.toISOString()}`);\n    lines.push(`Version:          ${report.version}`);\n    lines.push(`Total Checks:     ${report.summary.totalChecks}`);\n    lines.push(`Passed:           ${report.summary.passed}`);\n    lines.push(`Failed:           ${report.summary.failed}`);\n    lines.push(`Errors:           ${report.summary.errors}`);\n    lines.push(`Warnings:         ${report.summary.warnings}`);\n    lines.push(`Compliance Score: ${report.complianceScore}%`);\n    lines.push(`Overall Status:   ${report.overallPassed ? '✓ PASSED' : '✗ FAILED'}`);\n    lines.push('');\n\n    // Detailed Results\n    lines.push('DETAILED RESULTS');\n    lines.push('─'.repeat(40));\n\n    for (const check of report.checks) {\n      if (!options.includePassedChecks && check.passed) continue;\n\n      const status = check.passed ? '✓' : '✗';\n      lines.push(`\\n${status} ${check.checkName} (${check.checkId})`);\n\n      if (check.issues.length === 0) {\n        lines.push('  No issues found');\n        continue;\n      }\n\n      for (const issue of check.issues) {\n        const icon = this.getSeverityIcon(issue.severity);\n        lines.push(`  ${icon} [${issue.severity.toUpperCase()}] ${issue.message}`);\n\n        if (issue.location) {\n          lines.push(`    Location: ${issue.location}`);\n        }\n\n        if (issue.details) {\n          lines.push(`    Details: ${issue.details}`);\n        }\n\n        if (options.includeSuggestions && issue.suggestion) {\n          lines.push(`    Suggestion: ${issue.suggestion}`);\n        }\n      }\n    }\n\n    // Footer\n    lines.push('');\n    lines.push('═'.repeat(60));\n    lines.push(this.centerText('End of Report', 60));\n    lines.push('═'.repeat(60));\n\n    return lines.join('\\n');\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // MARKDOWN FORMAT\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private generateMarkdownReport(report: ConformanceReport, options: ReportOptions): string {\n    const lines: string[] = [];\n    const title = options.title ?? 'UI Kit Conformance Report';\n\n    // Header\n    lines.push(`# ${title}`);\n    lines.push('');\n    lines.push(`> Generated: ${report.timestamp.toISOString()}`);\n    lines.push('');\n\n    // Status Badge\n    const statusBadge = report.overallPassed\n      ? '![Status](https://img.shields.io/badge/Status-PASSED-green)'\n      : '![Status](https://img.shields.io/badge/Status-FAILED-red)';\n    lines.push(statusBadge);\n    lines.push(`![Score](https://img.shields.io/badge/Score-${report.complianceScore}%25-blue)`);\n    lines.push('');\n\n    // Summary Table\n    lines.push('## Summary');\n    lines.push('');\n    lines.push('| Metric | Value |');\n    lines.push('|--------|-------|');\n    lines.push(`| Total Checks | ${report.summary.totalChecks} |`);\n    lines.push(`| Passed | ${report.summary.passed} |`);\n    lines.push(`| Failed | ${report.summary.failed} |`);\n    lines.push(`| Errors | ${report.summary.errors} |`);\n    lines.push(`| Warnings | ${report.summary.warnings} |`);\n    lines.push(`| Compliance Score | ${report.complianceScore}% |`);\n    lines.push('');\n\n    // Issues by Category\n    lines.push('## Issues by Category');\n    lines.push('');\n\n    const byCategory = this.groupByCategory(report.checks);\n\n    for (const [category, checks] of Object.entries(byCategory)) {\n      const issues = checks.flatMap((c) => c.issues);\n      if (issues.length === 0 && !options.includePassedChecks) continue;\n\n      lines.push(`### ${this.formatCategory(category)}`);\n      lines.push('');\n\n      if (issues.length === 0) {\n        lines.push('✅ All checks passed');\n        lines.push('');\n        continue;\n      }\n\n      for (const issue of issues) {\n        const emoji = this.getSeverityEmoji(issue.severity);\n        lines.push(`- ${emoji} **${issue.message}**`);\n\n        if (issue.location) {\n          lines.push(`  - Location: \\`${issue.location}\\``);\n        }\n\n        if (options.includeSuggestions && issue.suggestion) {\n          lines.push(`  - 💡 ${issue.suggestion}`);\n        }\n      }\n\n      lines.push('');\n    }\n\n    // Detailed Check Results\n    lines.push('## Detailed Results');\n    lines.push('');\n\n    for (const check of report.checks) {\n      if (!options.includePassedChecks && check.passed) continue;\n\n      const statusEmoji = check.passed ? '✅' : '❌';\n      lines.push(`### ${statusEmoji} ${check.checkName}`);\n      lines.push('');\n      lines.push(`**Check ID:** \\`${check.checkId}\\``);\n      lines.push('');\n\n      if (check.passed) {\n        lines.push('No issues found.');\n      } else {\n        lines.push('| Severity | Message | Location |');\n        lines.push('|----------|---------|----------|');\n\n        for (const issue of check.issues) {\n          const severity = this.getSeverityBadge(issue.severity);\n          const location = issue.location ?? '-';\n          lines.push(`| ${severity} | ${issue.message} | ${location} |`);\n        }\n      }\n\n      if (options.includeMetadata && check.metadata) {\n        lines.push('');\n        lines.push('**Metadata:**');\n        lines.push('```json');\n        lines.push(JSON.stringify(check.metadata, null, 2));\n        lines.push('```');\n      }\n\n      lines.push('');\n    }\n\n    return lines.join('\\n');\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // JSON FORMAT\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private generateJsonReport(report: ConformanceReport, options: ReportOptions): string {\n    const output: Record<string, unknown> = {\n      title: options.title ?? 'UI Kit Conformance Report',\n      timestamp: report.timestamp.toISOString(),\n      version: report.version,\n      summary: report.summary,\n      overallPassed: report.overallPassed,\n      complianceScore: report.complianceScore,\n    };\n\n    if (options.includePassedChecks) {\n      output.checks = report.checks;\n    } else {\n      output.checks = report.checks.filter((c) => !c.passed);\n    }\n\n    if (options.includeMetadata) {\n      output.generatedBy = '@zuclubit/momoto-ui';\n      output.reportFormat = 'json';\n    }\n\n    return JSON.stringify(output, null, 2);\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // HTML FORMAT\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private generateHtmlReport(report: ConformanceReport, options: ReportOptions): string {\n    const title = options.title ?? 'UI Kit Conformance Report';\n    const statusClass = report.overallPassed ? 'passed' : 'failed';\n    const statusText = report.overallPassed ? 'PASSED' : 'FAILED';\n\n    return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>${title}</title>\n  <style>\n    :root {\n      --color-success: #22c55e;\n      --color-error: #ef4444;\n      --color-warning: #f59e0b;\n      --color-info: #3b82f6;\n      --color-bg: #0f172a;\n      --color-surface: #1e293b;\n      --color-text: #f1f5f9;\n      --color-muted: #94a3b8;\n    }\n\n    * {\n      box-sizing: border-box;\n      margin: 0;\n      padding: 0;\n    }\n\n    body {\n      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n      background: var(--color-bg);\n      color: var(--color-text);\n      line-height: 1.6;\n      padding: 2rem;\n    }\n\n    .container {\n      max-width: 1200px;\n      margin: 0 auto;\n    }\n\n    h1, h2, h3 {\n      margin-bottom: 1rem;\n    }\n\n    h1 {\n      font-size: 2rem;\n      border-bottom: 2px solid var(--color-surface);\n      padding-bottom: 1rem;\n    }\n\n    .header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 2rem;\n    }\n\n    .status {\n      display: inline-block;\n      padding: 0.5rem 1rem;\n      border-radius: 0.5rem;\n      font-weight: bold;\n      font-size: 0.875rem;\n    }\n\n    .status.passed {\n      background: var(--color-success);\n      color: white;\n    }\n\n    .status.failed {\n      background: var(--color-error);\n      color: white;\n    }\n\n    .summary {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n      gap: 1rem;\n      margin-bottom: 2rem;\n    }\n\n    .stat {\n      background: var(--color-surface);\n      padding: 1rem;\n      border-radius: 0.5rem;\n      text-align: center;\n    }\n\n    .stat-value {\n      font-size: 2rem;\n      font-weight: bold;\n    }\n\n    .stat-label {\n      color: var(--color-muted);\n      font-size: 0.875rem;\n    }\n\n    .score {\n      background: linear-gradient(135deg, var(--color-info), #8b5cf6);\n    }\n\n    .check {\n      background: var(--color-surface);\n      border-radius: 0.5rem;\n      margin-bottom: 1rem;\n      overflow: hidden;\n    }\n\n    .check-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 1rem;\n      cursor: pointer;\n    }\n\n    .check-header:hover {\n      background: rgba(255, 255, 255, 0.05);\n    }\n\n    .check-title {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n    }\n\n    .check-status {\n      width: 8px;\n      height: 8px;\n      border-radius: 50%;\n    }\n\n    .check-status.passed {\n      background: var(--color-success);\n    }\n\n    .check-status.failed {\n      background: var(--color-error);\n    }\n\n    .check-body {\n      padding: 0 1rem 1rem;\n      border-top: 1px solid rgba(255, 255, 255, 0.1);\n    }\n\n    .issue {\n      padding: 0.75rem;\n      margin: 0.5rem 0;\n      border-radius: 0.25rem;\n      border-left: 3px solid;\n    }\n\n    .issue.error {\n      background: rgba(239, 68, 68, 0.1);\n      border-color: var(--color-error);\n    }\n\n    .issue.warning {\n      background: rgba(245, 158, 11, 0.1);\n      border-color: var(--color-warning);\n    }\n\n    .issue.info {\n      background: rgba(59, 130, 246, 0.1);\n      border-color: var(--color-info);\n    }\n\n    .issue-message {\n      font-weight: 500;\n    }\n\n    .issue-detail {\n      font-size: 0.875rem;\n      color: var(--color-muted);\n      margin-top: 0.25rem;\n    }\n\n    .meta {\n      margin-top: 2rem;\n      padding-top: 1rem;\n      border-top: 1px solid var(--color-surface);\n      font-size: 0.875rem;\n      color: var(--color-muted);\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"header\">\n      <h1>${title}</h1>\n      <span class=\"status ${statusClass}\">${statusText}</span>\n    </div>\n\n    <div class=\"summary\">\n      <div class=\"stat score\">\n        <div class=\"stat-value\">${report.complianceScore}%</div>\n        <div class=\"stat-label\">Compliance Score</div>\n      </div>\n      <div class=\"stat\">\n        <div class=\"stat-value\">${report.summary.totalChecks}</div>\n        <div class=\"stat-label\">Total Checks</div>\n      </div>\n      <div class=\"stat\">\n        <div class=\"stat-value\">${report.summary.passed}</div>\n        <div class=\"stat-label\">Passed</div>\n      </div>\n      <div class=\"stat\">\n        <div class=\"stat-value\" style=\"color: var(--color-error)\">${report.summary.errors}</div>\n        <div class=\"stat-label\">Errors</div>\n      </div>\n      <div class=\"stat\">\n        <div class=\"stat-value\" style=\"color: var(--color-warning)\">${report.summary.warnings}</div>\n        <div class=\"stat-label\">Warnings</div>\n      </div>\n    </div>\n\n    <h2>Check Results</h2>\n    ${report.checks\n      .filter((c) => options.includePassedChecks || !c.passed)\n      .map((check) => this.generateHtmlCheck(check, options))\n      .join('\\n')}\n\n    <div class=\"meta\">\n      <p>Generated: ${report.timestamp.toISOString()}</p>\n      <p>Version: ${report.version}</p>\n    </div>\n  </div>\n</body>\n</html>`;\n  }\n\n  private generateHtmlCheck(check: ConformanceCheckResult, options: ReportOptions): string {\n    const statusClass = check.passed ? 'passed' : 'failed';\n\n    return `\n    <div class=\"check\">\n      <div class=\"check-header\">\n        <div class=\"check-title\">\n          <span class=\"check-status ${statusClass}\"></span>\n          <strong>${check.checkName}</strong>\n          <span style=\"color: var(--color-muted); font-size: 0.875rem;\">(${check.checkId})</span>\n        </div>\n        <span style=\"color: var(--color-muted);\">${check.issues.length} issues</span>\n      </div>\n      ${\n        check.issues.length > 0\n          ? `<div class=\"check-body\">\n          ${check.issues.map((issue) => this.generateHtmlIssue(issue, options)).join('\\n')}\n        </div>`\n          : ''\n      }\n    </div>`;\n  }\n\n  private generateHtmlIssue(issue: ConformanceIssue, options: ReportOptions): string {\n    return `\n      <div class=\"issue ${issue.severity}\">\n        <div class=\"issue-message\">${issue.message}</div>\n        ${issue.location ? `<div class=\"issue-detail\">Location: ${issue.location}</div>` : ''}\n        ${issue.details ? `<div class=\"issue-detail\">${issue.details}</div>` : ''}\n        ${options.includeSuggestions && issue.suggestion ? `<div class=\"issue-detail\">💡 ${issue.suggestion}</div>` : ''}\n      </div>`;\n  }\n\n  // ─────────────────────────────────────────────────────────────────────────\n  // HELPERS\n  // ─────────────────────────────────────────────────────────────────────────\n\n  private centerText(text: string, width: number): string {\n    const padding = Math.max(0, Math.floor((width - text.length) / 2));\n    return ' '.repeat(padding) + text;\n  }\n\n  private getSeverityIcon(severity: ConformanceSeverity): string {\n    switch (severity) {\n      case 'error':\n        return '✗';\n      case 'warning':\n        return '⚠';\n      case 'info':\n        return 'ℹ';\n    }\n  }\n\n  private getSeverityEmoji(severity: ConformanceSeverity): string {\n    switch (severity) {\n      case 'error':\n        return '🔴';\n      case 'warning':\n        return '🟡';\n      case 'info':\n        return '🔵';\n    }\n  }\n\n  private getSeverityBadge(severity: ConformanceSeverity): string {\n    switch (severity) {\n      case 'error':\n        return '![Error](https://img.shields.io/badge/-Error-red)';\n      case 'warning':\n        return '![Warning](https://img.shields.io/badge/-Warning-yellow)';\n      case 'info':\n        return '![Info](https://img.shields.io/badge/-Info-blue)';\n    }\n  }\n\n  private formatCategory(category: string): string {\n    return category\n      .split('-')\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(' ');\n  }\n\n  private groupByCategory(checks: ConformanceCheckResult[]): Record<string, ConformanceCheckResult[]> {\n    const groups: Record<string, ConformanceCheckResult[]> = {};\n\n    for (const check of checks) {\n      // Extract category from check metadata or ID\n      const category = this.inferCategory(check.checkId);\n      if (!groups[category]) {\n        groups[category] = [];\n      }\n      groups[category].push(check);\n    }\n\n    return groups;\n  }\n\n  private inferCategory(checkId: string): string {\n    if (checkId.includes('contrast') || checkId.includes('color-blind')) {\n      return 'accessibility';\n    }\n    if (checkId.includes('token')) {\n      return 'tokens';\n    }\n    if (checkId.includes('color') || checkId.includes('perceptual') || checkId.includes('gamut')) {\n      return 'color-intelligence';\n    }\n    if (checkId.includes('dependency') || checkId.includes('port')) {\n      return 'architecture';\n    }\n    return 'other';\n  }\n}\n\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\nexport default ReportGenerator;\n"]}